var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},function(e){"use strict";var t=BOLDGRID.EDITOR;BOLDGRID.EDITOR.Controls={$panel:null,$menu:null,$colorControl:null,controls:[],$container:null,init:function(e){this.$container=e,this.$container.find("body").css("marginTop","50px"),this.$menu=BOLDGRID.EDITOR.Menu.init(),this.$panel=BOLDGRID.EDITOR.Panel.init(),this.colorControl=BOLDGRID.EDITOR.CONTROLS.Color.init(),this.onEditibleClick(),this.setupSliders(),this.setupControls(),t.CONTROLS.Generic.setupInputCustomization(),t.CONTROLS.Generic.setupInputInitialization(),t.NOTICE.Update.init()},hasThemeFeature:function(e){return-1!==BoldgridEditor.builder_config.theme_features.indexOf(e)},addStyle:function(e,t,n){e.css(t,n),tinymce.activeEditor.dom.setStyle(e,t,n)},setupSliders:function(){this.$panel.on("slide",".section .slider",function(t,n){var o=e(this);o.siblings(".value").html(n.value)})},registerControl:function(e){this.controls.push(e)},editorMceInstance:function(){var e=!1;return IMHWPB.WP_MCE_Draggable&&IMHWPB.WP_MCE_Draggable.instance&&(e=IMHWPB.WP_MCE_Draggable.instance),e},clearMenuItems:function(){this.$menu.items=[]},_setupUpdateMenu:function(){var t=this;this.$container.on("click",function(n){t.$menu.find("li[data-action]").hide(),t.$menu.items.length?t.$menu.show():(t.$menu.hide(),BOLDGRID.EDITOR.Panel.closePanel()),e.each(t.$menu.items,function(){t.$menu.find('[data-action="menu-'+this+'"]').show(),BOLDGRID.EDITOR.Menu.reactivateMenu()}),t._closeOpenControl(),n.boldgridRefreshPanel||BOLDGRID.EDITOR.CONTROLS.Color.closePicker(),t.clearMenuItems()})},onEditibleClick:function(){this._setupUpdateMenu()},_closeOpenControl:function(){t.Panel.currentControl&&-1===this.$menu.items.indexOf(t.Panel.currentControl.name)&&t.Panel.closePanel()},setupControls:function(){var t=this,n=function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0};this.controls.sort(n),e.each(this.controls,function(){t.setupControl(this)}),BOLDGRID.EDITOR.CONTROLS.Section.init(t.$container)},setupControl:function(e){this.bindControlHandler(e),BOLDGRID.EDITOR.Menu.createListItem(e),e.setup&&e.setup()},bindControlHandler:function(t){var n=this;this.$container.on("click",t.selectors.join(),function(o){var r=e(this);if("box"==t.name){var i,a;if(o.boxFound)return;if(i=r.closest(".editing-as-row").length,a=r.is('.row .row [class^="col-md"]'),i&&!1===a)return;if(i&&(o.boxFound=!0),!o.boxFound&&r.parent().closest('[class*="col-md"]').length){var l=BOLDGRID.EDITOR.CONTROLS.Box.findModule(r),s=l.css("background-color");if(BOLDGRID.EDITOR.CONTROLS.Color.isColorTransparent(s))return;o.boxFound=!0}}r.closest(".wpview").length&&"edit-media"!=t.name||t.exceptionSelector&&o.target&&e(o.target).is(t.exceptionSelector)||(n.$menu.targetData=n.$menu.targetData||{},n.$menu.targetData[t.name]=r,t.elementClick&&t.elementClick(o),n.$menu.items.push(t.name))}),this.$menu.on("click",'[data-action="menu-'+t.name+'"]',t.onMenuClick)}}}(jQuery),jQuery.fn.IMHWPB_Draggable=function(e,t){var n=this,o=BOLDGRID.EDITOR,r=[];n.ie_version=null,n.isSafari=null,n.$master_container=this,n.$window=t(window),n.$body=n.$master_container.find("body"),n.$html=n.$master_container.find("html"),n.$validatedInput=t('input[name="boldgrid-in-page-containers"]'),n.$resize_overlay=t('<div id="boldgrid-draggable-resizing-overlay"></div>'),n.$master_container.find("html").append(n.$resize_overlay),n.original_selector_strings={},n.scrollInterval=!1,n.$mce_32=t("#"+tinymce.activeEditor.theme.panel._items[0]._id),n.$post_status_info=t("#post-status-info");var i=e.menu_items||[];this.popover_placement_testing=e.popover_placement_testing||!1,this.hover_timout=e.hover_timout||175,this.type_popover_removal=e.type_popover_removal||!0,this.$interaction_container=null,this.$boldgrid_menu_action_clicked=null,this.last_auto_scroll_event=null,this.editting_as_row=!1,this.hover_elements={content:{add_element:null},column:{add_element:null},row:{add_element:null}},this.color_alias={white:["rgb(255, 255, 255)","white"],transparent:["rgba(0, 0, 0, 0)","transparent"]},this.master_container_id="",this.resize_finish_event=t.Event("resize_done_dwpb"),this.resize_start_event=t.Event("resize_start_dwpb"),this.boldgrid_modify_event=t.Event("boldgrid_modify_content"),this.add_row_event=t.Event("add_row_event_dwpb"),this.delete_event=t.Event("delete_dwpb"),this.clear_event=t.Event("clear_dwpb"),this.add_column_event=t.Event("add_column_dwpb"),this.drag_start_event=t.Event("drag_start_dwpb"),this.boldgrid_edit_row=t.Event("boldgrid_edit_row"),this.popovers_disabled=!1,this.right_resize_buffer=10,this.drag_end_event=t.Event("drag_end_dwpb"),this.nest_row=!1,this.drag_drop_triggered=!1,this.debug=e.debug,this.draggable_selectors_string=null,this.row_selectors_string=null,this.content_selectors_string=null,this.column_selectors_string=null,this.dragging_selector_class_name="dragging-imhwpb",this.dragging_selector="."+this.dragging_selector_class_name,this.$current_drag=null,this.resize=!1,this.valid_drag=null,this.border_hover_buffer=15,this.resize_buffer=.0213,this.max_row_size=12,this.$most_recent_row_enter_add=null,this.window_width=null,this.window_height=null,this.active_resize_class=null,this.restore_row=null,this.$temp_insertion=null,this.$cloned_drag_image=null,this.row_selector=e.row_selector||[".row:not("+n.master_container_id+" .row .row)"],this.add_media_event_handler=e.add_media_event_handler||function(){},this.insert_layout_event_handler=e.insert_layout_event_handler||function(){},this.general_column_selectors=e.general_column_selectors||['[class*="col-xs"]','[class*="col-sm"]','[class*="col-md"]','[class*="col-lg"]'],this.nested_row_selector_string=".row .row:not(.row .row .row)",this.sectionSelectorString=".boldgrid-section",this.general_content_selectors=["h1","h2","h3","h4","h5","h6","h7","a:not(p a)","img:not(p img):not(a img)","p","button:not(p button):not(a button)","ul","ol","dl","form","table",".row .row",'[data-imhwpb-draggable="true"]',".wpview-wrap",".wpview","blockquote","code","abbr"],this.content_selectors=e.content_selectors||["h1:not("+n.master_container_id+" .row .row h1)","h2:not("+n.master_container_id+" .row .row h2)","h3:not("+n.master_container_id+" .row .row h3)","h4:not("+n.master_container_id+" .row .row h4)","h5:not("+n.master_container_id+" .row .row h5)","h6:not("+n.master_container_id+" .row .row h6)","h7:not("+n.master_container_id+" .row .row h7)","a:not("+n.master_container_id+".row .row a):not(p a)","img:not("+n.master_container_id+" .row .row img):not(p img):not(a img)","p:not("+n.master_container_id+" .row .row p)","button:not("+n.master_container_id+" .row .row button):not(p button):not(a button)","ul:not("+n.master_container_id+" .row .row ul)","ol:not("+n.master_container_id+" .row .row ol)","dl:not("+n.master_container_id+" .row .row dl)","form:not("+n.master_container_id+" .row .row form)","table:not("+n.master_container_id+" .row .row table)",".row .row:not(:not("+n.master_container_id+" .row .row))",'[data-imhwpb-draggable="true"]:not('+n.master_container_id+' .row .row [data-imhwpb-draggable="true"])',".wpview-wrap:not("+n.master_container_id+" .row .row .wpview-wrap)",".wpview:not("+n.master_container_id+" .row .row .wpview)","blockquote:not(.row .row blockquote)","code:not(.row .row code)","abbr:not(.row .row abbr)"];var a=[".row .row h1",".row .row h2",".row .row h3",".row .row h4",".row .row h5",".row .row h6",".row .row h7",".row .row a",".row .row img:not(p img):not(a img)",".row .row p",".row .row button:not(p button):not(a button)",".row .row ul",".row .row ol",".row .row dl",".row .row form",".row .row table",".row .row .row",'.row .row [data-imhwpb-draggable="true"]',".row .row .wpview-wrap",".row .row .wpview",".row .row code",".row .row blockquote",".row .row abbr"],l=["> h1","> h2","> h3","> h4","> h5","> h6","> h7","> a","> img","> p","> button","> ul","> ol","> dl","> form","> table","> .row","> dl","> form","> table",".row:not(.row .row)",'> [data-imhwpb-draggable="true"]',"> .wpview-wrap","> .wpview","> code","> blockquote","> abbr"];this.column_sizes={0:0,1:.083,2:.167,3:.25,4:.333,5:.416,6:.5,7:.583,8:.667,9:.75,10:.833,11:.917,12:1,13:1.083},this.dragImageSetting=e.dragImage||"browserImage",this.dragTypeSetting=e.dragType||"dragEnter",this.layout_translation={"[12]":{12:"6","new":"6"},"[6,6]":{6:"4","new":"4"},"[4,4,4]":{4:"3","new":"3"},"[3,3,3,3]":{current:"3",current_transform:"2","new":"2",additional_transform:[{count:"1",from:"3",to:"2"}]},"[6,3,3]":{current:"3",current_transform:"2","new":"2",additional_transform:[{count:"1",from:"3",to:"2"}]}};var s=["duplicate","add-row","add-column","nest-row","clear","delete","clone-as-row","align-top","align-bottom","align-default","align-center"],c={column:{"":"Edit Column",duplicate:"Clone","delete":"Delete",clear:"Clear Contents","add-media":"Insert Media","vertical-alignment":{title:"Vertical Alignment",options:{"align-default":"Default","align-top":"Top","align-center":"Center","align-bottom":"Bottom"}},Box:"Background"},row:{"":"Edit Row",duplicate:"Clone","delete":"Delete",clear:"Clear Contents","insert-layout":"Insert GridBlock","add-column":"Add Column","add-row":"Add Empty Row","nest-row":""},content:{"":"Edit Content",duplicate:"Clone","delete":"Delete",Font:"Font"},"nested-row":{"":"Edit Content",duplicate:"Clone","delete":"Delete","clone-as-row":"Clone as Row"}};this.type_popover_classes={content:"content-popover-imhwpb left-popover-imhwpb","nested-row":"content-popover-imhwpb nested-row-popover-imhwpb left-popover-imhwpb",row:"row-popover-imhwpb right-popover-imhwpb",column:"top-popover-imhwpb column-popover-imhwpb"},this.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},this.toolkit_markup=function(e){var o=n.capitalizeFirstLetter(e),r='<div spellcheck="false" data-mce-bogus="all" contenteditable="false"unselectable="on" class="draggable-tools-imhwpb"><span class="popover-imhwpb '+n.type_popover_classes[e]+'"><div title="Drag '+o+'" contenteditable="false" draggable="true" class="no-select-imhwpb drag-handle-imhwpb draggable-button"> <span  class="genericon genericon-move" aria-hidden="true"> </span></div>';return r+="<div class='popover-menu-imhwpb hidden'><ul>",t.each(c[e],function(e,n){var o="";"nest-row"==e&&(o='draggable="true"'),"object"==typeof n?(r+="<li class='no-select-imhwpb action-list side-menu-parent' data-action='"+e+"'>"+n.title+"</li>",r+="<div class='side-menu'>",r+="<ul>",t.each(n.options,function(e,t){r+="<li class='no-select-imhwpb action-list' data-action='"+e+"'>"+t+"</li>"}),r+="</ul>",r+="</div>"):r+="<li class='no-select-imhwpb action-list' "+o+" data-action='"+e+"'>"+n+"</li>"}),r+="</ul></div>",r+='<div title="Edit '+o+'" class="context-menu-imhwpb draggable-button"> <span  class="genericon genericon-menu" aria-hidden="true"></span></div>',"nested-row"==e&&(r+='<div title="Edit As Row" class="edit-as-row draggable-button"><span class="genericon genericon-expand"  aria-hidden="true"></span></div>'),r+"</span></div>"},this.init=function(){return n.$interaction_container=n.determine_interaction_container(),n.$master_container.fourpan({element_padding:0,transition_speed:0,activate:g,deactivate:u}),n.ie_version=n.get_ie_version(),n.isSafari=n.checkIsSafari(),n.create_selector_strings(),d(),n.bind_events(),n.setup_additional_plugins(),n.validate_markup(),n.track_window_size(),n.merge_additional_menu_options(),addContainerData(),o.RESIZE.Row.init(n.$master_container),o.Controls.init(n.$master_container),o.DRAG.Section.init(n.$master_container),n},addContainerData=function(){BoldgridEditor.is_boldgrid_theme||n.$master_container.find("html").addClass("non-bg-theme")};var d=function(){n.original_selector_strings={general_content_selector_string:n.general_content_selector_string,unformatted_content_selectors_string:n.unformatted_content_selectors_string,content_selectors_string:n.content_selectors_string,immediate_row_siblings_string:n.immediate_row_siblings_string,row_selectors_string:n.row_selectors_string,column_selectors_string:n.column_selectors_string,unformatted_column_selectors_string:n.unformatted_column_selectors_string,general_column_selectors_string:n.general_column_selectors_string,immediate_column_selectors_string:n.immediate_column_selectors_string,draggable_selectors_string:n.draggable_selectors_string}};this.create_selector_strings=function(){n.general_content_selector_string=n.general_content_selectors.join(),n.unformatted_content_selectors_string=n.content_selectors.join(),n.content_selectors_string=n.format_selectors(n.content_selectors).join(),n.immediate_row_siblings_string=l.join(),n.row_selectors_string=n.row_selector.join(),n.column_selectors_string=n.format_column_selectors(n.general_column_selectors,!0).join(),n.unformatted_column_selectors_string=n.column_selectors_string.replace(/:visible/,""),n.general_column_selectors_string=n.general_column_selectors.join(),n.immediate_column_selectors_string=n.format_immediate_column_selectors(n.general_column_selectors).join(),n.draggable_selectors_string=n.format_draggable_selectors_string()},this.set_background_colors=function(){var e=n.$body.css("background-color");(n.color_is(e,"transparent")||n.color_is(e,"white"))&&(n.$body.css("background-color","white"),n.color_is(n.$body.css("color"),"white")&&n.$body.css("color","black"))},this.validate_markup=function(){BoldgridEditor.is_boldgrid_theme&&!o.Controls.hasThemeFeature("variable-containers")||(o.VALIDATION.Section.updateContent(n.$body),n.$validatedInput.attr("value",1)),n.wrap_hr_tags(),n.wrap_content_elements(),n.add_redundant_classes(),n.removeClasses(n.$master_container)},this.removeClasses=function(e){e.find(".bg-control-element").removeClass("bg-control-element")},this.failSafeCleanup=function(){n.$master_container.find("body .dragging-started-imhwpb").remove(),n.$master_container.find(".cloned-div-imhwpb").removeClass("cloned-div-imhwpb")},this.wrap_content_elements=function(){n.$master_container.find("img, a").each(function(){var e=t(this);e.parent().closest_context(n.original_selector_strings.content_selectors_string,n.$master_container).length||e.wrap("<p class='mod-reset'></p>")})},this.wrap_hr_tags=function(){n.$master_container.find("hr").each(function(){var e=t(this);if(!e.closest_context(n.original_selector_strings.content_selectors_string,n.$master_container).length){var o=e.closest_context(n.original_selector_strings.row_selectors_string+", "+n.original_selector_strings.general_column_selectors_string,n.$master_container);o.is(n.original_selector_strings.row_selectors_string)?e.wrap("<div class='col-md-12'><div class='row'><div class='col-md-12'></div></div></div>"):e.wrap("<div class='row'><div class='col-md-12'></div></div>")}})},this.merge_additional_menu_options=function(){t.each(i,function(e,n){var o=c[n.element_type],r={};r[n.title]=n.title,t.extend(o,r)})},this.determine_interaction_container=function(){var e=null,t=n.$master_container.find("body");return e=t.length?n.$master_container:n.$master_container.closest("html")},this.bind_events=function(){n.bind_drag_listeners(),n.bind_container_events(),n.bind_menu_items(),n.bind_additional_menu_items(),n.bind_edit_row(),setTimeout(function(){n.set_background_colors()},1e3)};var u=function(){n.editting_as_row&&(n.content_selectors=n.original_selectors.content,n.row_selector=n.original_selectors.row,n.create_selector_strings(),n.$master_container.off(".draggable"),n.$body.off(".draggable"),n.bind_events(),t.fourpan.$recent_highlight.removeClass("current-edit-as-row"),n.editting_as_row=!1,n.$html.removeClass("editing-as-row"),n.window_mouse_leave(),n.$master_container.trigger("edit-as-row-leave"))},g=function(){n.original_selectors={},n.original_selectors.content=n.content_selectors,n.original_selectors.row=n.row_selector,n.content_selectors=a,n.row_selector=[n.nested_row_selector_string],n.create_selector_strings(),n.$master_container.off(".draggable"),n.$body.off(".draggable"),n.bind_events(),n.$master_container.find(".current-edit-as-row").removeClass("current-edit-as-row"),t.fourpan.$recent_highlight.addClass("current-edit-as-row"),n.editting_as_row=t.fourpan.$recent_highlight,n.$html.addClass("editing-as-row"),n.$master_container.trigger("edit-as-row-enter"),n.window_mouse_leave()};this.bind_edit_row=function(){n.$master_container.on("click.draggable",".edit-as-row",function(){var e=t(this),o=e.closest(".draggable-tools-imhwpb").next();n.$master_container.trigger(n.boldgrid_edit_row,o),n.editting_as_row?t.fourpan.dismiss():t.fourpan.highlight(o)})},this.unbind_all_events=function(){n.$master_container.off(".draggable"),n.$body.off(".draggable"),n.$master_container.off(".draggable_mce"),n.$body.attr("style","")},this.hide_menus=function(e){var o,r=!1;if(e&&e.target&&(o=t(e.target),o.closest(".popover-menu-imhwpb").length?r=!0:o.closest(".context-menu-imhwpb").siblings(".popover-menu-imhwpb:visible").length&&(r=!0)),!r){var i=n.$master_container.find(".popover-menu-imhwpb");o&&i.not(o.closest(".popover-menu-imhwpb")).addClass("hidden")}},this.setup_additional_plugins=function(){t.fn.is_typing_boldgrid&&n.$master_container.is_typing_boldgrid()},this.bind_container_events=function(){n.$master_container.on("click.draggable",".drag-handle-imhwpb, .draggable-tools-imhwpb",n.prevent_default_draghandle).on("mousedown.draggable",".drag-handle-imhwpb",n.drag_handle_mousedown).on("mouseup.draggable",".drag-handle-imhwpb",n.drag_handle_mouseup).on("click.draggable",n.hide_menus).on("click.draggable",n.failSafeCleanup).on("click.draggable",".context-menu-imhwpb",n.setup_context_menu).on("boldgrid_modify_content.draggable",n.refresh_fourpan),n.type_popover_removal&&n.$master_container.on("start_typing_boldgrid.draggable",n.typing_events.start).on("end_typing_boldgrid.draggable",n.typing_events.end),n.$body.on("mouseenter.draggable",n.draggable_selectors_string+", .draggable-tools-imhwpb",n.insert_drag_handles).on("mouseleave.draggable",n.draggable_selectors_string+", .draggable-tools-imhwpb",n.remove_drag_handles),n.$interaction_container.on("mouseleave.draggable",n.window_mouse_leave).on("mouseup.draggable",n.master_container_mouse_up).on("mousemove.draggable",n.mousemove_container),(n.ie_version>11||!n.ie_version)&&n.$interaction_container.on(n.resize_event_map,n.column_selectors_string)},this.bind_menu_items=function(){n.$body.on("click.draggable",'li[data-action="delete"]',n.menu_actions.delete_element).on("click.draggable",'li[data-action="add-column"]',n.menu_actions.add_column).on("click.draggable",'li[data-action="duplicate"]',n.menu_actions.duplicate).on("click.draggable",'li[data-action="clear"]',n.menu_actions.clear).on("click.draggable",'li[data-action="insert-layout"]',n.menu_actions.insert_layout).on("click.draggable",'li[data-action="nest-row"]',n.menu_actions.nest_row).on("click.draggable",'li[data-action="add-row"]',n.menu_actions.add_row).on("click.draggable",'li[data-action="clone-as-row"]',n.menu_actions.unnest_row).on("click.draggable","li[data-action]",n.menu_actions.trigger_action_click).on("click.draggable",'li[data-action="add-media"]',n.menu_actions.add_media).on("click.draggable",'li[data-action="align-top"]',n.menu_actions.alignTop).on("click.draggable",'li[data-action="Box"]',n.menu_actions.generalMacro).on("click.draggable",'li[data-action="Font"]',n.menu_actions.generalMacro).on("click.draggable",'li[data-action="align-default"]',n.menu_actions.alignDefault).on("click.draggable",'li[data-action="align-bottom"]',n.menu_actions.alignBottom).on("click.draggable",'li[data-action="align-center"]',n.menu_actions.alignCenter)},this.bind_additional_menu_items=function(){t.each(i,function(e,t){n.$master_container.on("click.draggable",'li[data-action="'+t.title+'"]',t.callback)})},this.bind_drag_listeners=function(){n.$window.on("dragover.draggable",n.drag_handlers.over),n.$interaction_container.on("dragstart.draggable",'.drag-handle-imhwpb, [data-action="nest-row"]',n.drag_handlers.start).on("dragstart.draggable","img, a",n.drag_handlers.hide_tooltips).on("drop.draggable",n.drag_handlers.drop).on("dragend.draggable",n.drag_handlers.end).on("dragleave.draggable",n.drag_handlers.leave_dragging).on("dragenter.draggable",n.drag_handlers.record_drag_enter)},this.refresh_fourpan=function(){n.editting_as_row&&t.fourpan.refresh()},t.fn.reverse=[].reverse,t.fn.remove_popover_imhwpb=function(){t(this).remove()},t.fn.is_after=function(e){return 0!==this.prevAll().filter(e).length},t.fn.is_before=function(e){return 0!==this.nextAll().filter(e).length},t.fn.closest_context=function(e,t){var n;return n=this.is(e)?this:this.parentsUntil(t).filter(e).eq(0)},this.add_redundant_classes=function(){n.$master_container.find(n.original_selector_strings.general_column_selectors_string).each(function(){$current_element=t(this),$current_element.addClass(n.find_column_sizes($current_element))})},this.track_window_size=function(){n.active_resize_class=n.determine_class_sizes(),n.$window.on("load resize",function(){setTimeout(function(){n.active_resize_class=n.determine_class_sizes()},300)})},this.prevent_default=function(e){e.preventDefault&&e.preventDefault()},this.format_draggable_selectors_string=function(){var e=[];return e.push(n.content_selectors_string),e.push(n.column_selectors_string),e.push(n.row_selectors_string),e.join()},this.format_immediate_column_selectors=function(e){var o=n.format_selectors(e).slice();return t.each(o,function(e,t){t="> "+t,o[e]=t}),o},this.find_column_sizes=function(e){var t=e.attr("class"),n=[],o=t.match(/col-xs-([\d]+)/i),r=t.match(/col-sm-([\d]+)/i),i=t.match(/col-md-([\d]+)/i),a=12;return o?a=o[1]:n.push("col-xs-"+a),r?a=r[1]:n.push("col-sm-"+a),i||n.push("col-md-"+a),n.join(" ")},this.format_column_selectors=function(e,o){var r=e;return o&&(r=n.format_selectors(e).slice()),t.each(r,function(e,t){t=n.row_selectors_string+" > "+t,r[e]=t}),r},this.format_selectors=function(e){var n=e.slice();return t.each(n,function(e,t){t+=":visible",n[e]=t}),n},this.before_or_after_drop=function(e,t){var n=e.get(0).getBoundingClientRect(),o=-(n.height/n.width),r=Math.floor(n.bottom)-o*n.left,i=o*t.x+r;return i<=t.y?drop_point="after":drop_point="before",drop_point},this.remove_receptor_containers=function(){n.$master_container.find(".receptor-containers-imhwpb").removeClass("receptor-containers-imhwpb")},this.finish_dragging=function(){n.$cloned_drag_image&&n.$cloned_drag_image.remove&&n.$cloned_drag_image.remove(),n.$temp_insertion&&n.$temp_insertion.removeClass("cloned-div-imhwpb"),n.$master_container.find(n.dragging_selector).removeClass(n.dragging_selector_class_name),n.valid_drag=!1,n.remove_receptor_containers(),n.$master_container.trigger(n.boldgrid_modify_event)},this.array_equal=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},this.slide_in_place=function(e,t){t.offset(),e.offset();n.drag_cleanup()},this.drag_cleanup=function(){n.ie_version||n.validate_markup(),n.$current_drag.remove(),n.finish_dragging(),n.$master_container.trigger(n.drag_end_event,n.$temp_insertion),n.$current_drag=null,n.$master_container.removeClass("drag-progress"),clearInterval(n.scrollInterval)},this.refresh_handle_location=function(){n.remove_all_popovers(),n.update_handles(n.last_hover)},this.determine_current_drag_properties=function(){var e="",t="";n.$current_drag.IMHWPB.is_row?e=n.row_selectors_string:n.$current_drag.IMHWPB.is_column?(t=n.row_selectors_string,e=n.general_column_selectors_string):n.$current_drag.IMHWPB.is_content&&(t=n.column_selectors_string,e=n.content_selectors_string),n.$current_drag.properties={sibling:e,parent:t}},this.between=function(e,t,n){return e>=t&&e<=n},this.remove_all_popovers=function(){n.last_hover=null,n.hover_elements.type={content:null,column:null,row:null},n.delete_popovers()},this.delete_popovers=function(){n.$master_container.find("body .draggable-tools-imhwpb").each(function(){var e=t(this),n=e.next();n.length&&(n[0].popover=null),setTimeout(function(){e.remove()})})},this.setup_context_menu=function(e){var o;e.preventDefault(),e.stopPropagation(),n.hide_menus(e),o=t(this).closest(".draggable-tools-imhwpb, .bg-drag-popover"),o.find(".popover-menu-imhwpb").toggleClass("hidden"),n.setMenuPosition(o),n.setMenuState(o)},this.setMenuState=function(e){e.removeClass("menu-open"),!1===e.find(".popover-menu-imhwpb").hasClass("hidden")&&e.addClass("menu-open")},this.setMenuPosition=function(e){var t,o,r=e[0].getBoundingClientRect(),i=e.find(".side-menu"),a=n.$html.width(),l=100;i.length&&(e.removeClass("side-menu-left menu-align-left"),t=e.find(".popover-menu-imhwpb ul").width(),o=r.right+i.width(),o+=l,o>n.$html.width()&&e.addClass("side-menu-left"),t+r.right>a&&e.addClass("menu-align-left"))},this.get_element_type=function(e){var t="";return e.is(n.content_selectors_string)?t="content":e.is(n.row_selectors_string)?t="row":e.is(n.column_selectors_string)&&(t="column"),t},this.remove_drag_handles=function(e){var o,r,i,a=t(this);if(e.relatedTarget){n.remove_receptor_containers();var l=t(e.relatedTarget||e.toElement);if(0!=l.length){var s=l.closest(".draggable-tools-imhwpb");if(a.hasClass("draggable-tools-imhwpb")){if(a.next().find(l).length||a.next()[0]==l[0])return!1;i=a,r=a.next()}else if(s[0]!=this.popover||0==s.length){o=n.get_element_type(a);var c=a.parent().closest_context(n.content_selectors_string,n.$master_container).length;if("content"==o&&c)return!1;if(a.find(l).length)return!1;i=a.prev(".draggable-tools-imhwpb"),r=a}r&&r.length&&(o=n.get_element_type(r),o&&n.hover_elements[o]&&"undefined"!=typeof n.hover_elements[o].add_element&&null!=n.hover_elements[o].add_element&&(n.hover_elements[o].add_element=null,"row"==o?(n.hover_elements.column={add_element:null},n.hover_elements.content={add_element:null}):"column"==o&&(n.hover_elements.content={add_element:null}))),r&&r.length&&i&&i.length&&(n.last_hover=(new Date).getTime(),n.hover_elements[o]={remove_element:{element:r,tools:i}},setTimeout(n.update_handles,n.hover_timout,n.last_hover))}}},this.remove_drag_handle=function(e,t){t&&t.remove_popover_imhwpb(),e&&e.length&&(e[0].popover=null,0==n.$current_drag&&e.removeClass(n.dragging_selector_class_name))},this.get_tooltip_type=function(e){if(e.is(n.nested_row_selector_string)&&0==e.find("> .col-md-12 > hr:only-child").length&&!n.editting_as_row)var t="nested-row";else var t=n.get_element_type(e);return t},this.insert_popover=function(e){if(n.$master_container.find(e).length){var t=n.get_tooltip_type(e);if(t){e.before(n.toolkit_markup(t));var o=e.prev(".draggable-tools-imhwpb");e.offset(),e.offsetParent().offset();if(e[0].popover=o[0],"content"==t||"nested-row"==t){n.$content_tooltip&&n.$content_tooltip.remove(),n.$content_tooltip=o;var r=e[0].getBoundingClientRect(),i=r.left-17;i<25&&(i=25),e.is("img, .row .row, .wpview-wrap, .wpview")&&o.find('[data-action="Font"]').hide(),o.css({top:r.top-25,left:i})}else if("column"==t){n.$column_tooltip&&n.$column_tooltip.remove(),n.$column_tooltip=o;var r=e[0].getBoundingClientRect();o.css({top:r.top,left:r.left})}else"row"==t&&(n.$row_tooltip&&n.$row_tooltip.remove(),n.$row_tooltip=o,o.css({position:"relative"}))}}},this.get_top_level_elements=function(){return n.$body.find("> *").not(".draggable-tools-imhwpb")},this.insert_drag_handles=function(e){var o=t(this);if(!n.resize&&!n.popovers_disabled){var r=n.get_top_level_elements();if(1===r.length&&"P"==r[0].tagName)return;var i=o.closest(".draggable-tools-imhwpb");i.length&&(o=i.next());var a=n.get_element_type(o);"content"==a&&1==o.parent().closest_context(n.content_selectors_string,n.$master_container).length&&(o=o.parents(n.content_selectors_string).last()),n.last_hover=(new Date).getTime(),n.hover_elements[a]={add_element:o},setTimeout(n.update_handles,n.hover_timout,n.last_hover)}},this.update_handles=function(e){if(e==n.last_hover){if(n.is_typing&&1==n.is_typing)return!1;t.each(n.hover_elements,function(e,o){if(this.add_element&&0==this.add_element.prev().hasClass("draggable-tools-imhwpb")?n.insert_popover(this.add_element):this.remove_element&&n.remove_drag_handle(this.remove_element.element,this.remove_element.tools),!this.add_element){var r=n.$master_container.find("."+e+"-popover-imhwpb").closest(".draggable-tools-imhwpb");r.each(function(){var e=t(this);n.remove_drag_handle(e.next(),e)})}})}},this.find_row_layout=function(e){var o=[],r=[],i=0;return e.find(n.immediate_column_selectors_string).each(function(){var e={},a=t(this),l=n.find_column_size(a);l+i<=12?(e.size=l,e.object=a[0],r.push(e),i+=l):(o.push(r),r=[],e.size=i=l,e.object=a[0],r.push(e))}),r.length&&o.push(r),o},this.find_column_stack=function(e,o){var r=[],i=null,a=n.find_row_layout(e);return t.each(a,function(e,n){if(t.each(n,function(t,a){if(o==a.object)return r=n,i=e,!1}),r.length)return!1}),{stack:r,stack_index:i}},this.check_adjacent_column=function(e,n){var o=!1;return n&&n.length&&t.each(e,function(e,t){if(n[0]==t.object)return o=!0,!1}),o},this.elementIsEmpty=function(e){var t=e.is(":empty"),n=4;return!t&&!e.find("img, i, hr, a").length&&e.text().length<n&&(t=!0),t},this.getNewColumnString=function(){var e="col-md-1 col-sm-12 col-xs-12";switch(n.active_resize_class){case"col-sm":e="col-md-12 col-sm-1 col-xs-12";break;case"col-xs":e="col-md-12 col-sm-12 col-xs-1"}return e},this.mousemove_container=function(e){if(n.pageX=e.originalEvent.clientX,n.pageY=e.originalEvent.clientY,n.resize){n.resize.triggered||(n.$master_container.trigger(n.resize_start_event),n.resize.triggered=!0);var o,r,i,a,l=n.resize.element.closest_context(n.row_selectors_string,n.$master_container),s=l[0].getBoundingClientRect().width,c=n.find_column_size(n.resize.element),d=n.find_column_size(n.resize.sibling),u=n.resize.element[0].getBoundingClientRect(),g=n.find_row_size(l),m=n.column_sizes[c]*s,p=n.column_sizes[c+1]*s,_=n.column_sizes[c-1]*s;n.resize.left?(o=p-m+u.left,r=_-m+u.left,i=n.pageX>o,a=n.pageX<r):(o=_-m+u.right,r=p-m+u.right,i=n.pageX<o,a=n.pageX>r||l[0].getBoundingClientRect().right+n.right_resize_buffer<n.pageX);var f=s*n.resize_buffer,h=i||n.between(o,n.pageX-f,n.pageX+f),v=a||n.between(r,n.pageX-f,n.pageX+f),b=h&&c>1,D=v&&c<n.max_row_size;if(n.resize.left&&D){var C=n.find_column_stack(l,n.resize.element[0]);if(n.resize.element[0]==C.stack[0].object)return!1}if(1===c&&h){if(n.elementIsEmpty(n.resize.element)){n.resize.element;n.resize.element.remove(),n.change_column_size(n.resize.sibling),n.resize.element=n.resize.sibling,n.resize.right?(n.resize.left=n.resize.right,n.resize.element.addClass("resize-border-left-imhwpb"),n.resize.right=null,$newSibiling=n.resize.sibling.prev()):(n.resize.right=n.resize.left,n.resize.element.addClass("resize-border-right-imhwpb"),n.resize.left=null,$newSibiling=n.resize.sibling.next()),n.resize.sibling=$newSibiling}return!1}if(b||D){var C=n.find_column_stack(l,n.resize.element[0]);if(n.resize.left&&n.resize.element[0]==C.stack[0].object&&h)return g<=12&&(n.change_column_size(n.resize.element,!1),n.resize.sibling=t("<div>").addClass(n.getNewColumnString()),n.resize.element.before(n.resize.sibling),!1);if(v&&1==d){if(n.elementIsEmpty(n.resize.sibling)){var w="next";n.resize.left&&(w="prev");var O=n.resize.sibling[w]();n.resize.sibling.remove(),n.resize.sibling=O,n.change_column_size(n.resize.element)}return!1}var $=C.stack[C.stack.length-1].object==n.resize.element[0];if(n.resize.right&&12==g&&D&&"col-md"==n.active_resize_class&&$)return!1;if(g<=12&&n.resize.right&&$&&h)return n.change_column_size(n.resize.element,!1),n.resize.sibling=t("<div>").addClass(n.getNewColumnString()),l.append(n.resize.sibling),!1;var I=n.check_adjacent_column(C.stack,n.resize.sibling)}if(b){n.change_column_size(n.resize.element,!1),n.resize.sibling&&n.resize.sibling.length&&d<n.max_row_size&&I&&n.change_column_size(n.resize.sibling);var R=n.find_column_stack(l,n.resize.element[0]);C.stack_index!=R.stack_index&&n.end_resize()}else if(D){if(!n.resize.sibling||n.resize.sibling.length&&1==d)return;n.change_column_size(n.resize.element),
I&&n.change_column_size(n.resize.sibling,!1);var R=n.find_column_stack(l,n.resize.element[0]);C.stack_index!=R.stack_index&&n.end_resize()}}},this.prevent_default_draghandle=function(e){e.preventDefault()},this.frame_cleanup=function(e){var o=t("<div>"+e+"</div>");return n.remove_resizing_classes(o),n.remove_border_classes(o),n.removeClasses(o),o.find(".draggable-tools-imhwpb").remove(),o.html()},this.remove_resizing_classes=function(e){e.find(".resizing-imhwpb").removeClass("resizing-imhwpb")},this.remove_border_classes=function(e){e.find(".resize-border-left-imhwpb, .resizing-imhwpb, .resize-border-right-imhwpb, .content-border-imhwpb").removeClass("resize-border-right-imhwpb resizing-imhwpb resize-border-left-imhwpb content-border-imhwpb")},this.end_resize=function(){n.resize=!1,n.remove_border_classes(n.$master_container),n.$html.removeClass("no-select-imhwpb"),n.remove_resizing_classes(n.$master_container),n.$master_container.removeClass("resizing-imhwpb cursor-not-allowed-imhwpb"),n.$master_container.trigger(n.resize_finish_event)},this.window_mouse_leave=function(){n.resize&&n.end_resize(),n.remove_resizing_classes(n.$master_container),n.remove_all_popovers(),n.hover_elements={content:null,column:null,row:null}},this.drag_handle_mousedown=function(e){n.valid_drag=!0,n.$current_clicked_element=t(this).closest(".draggable-tools-imhwpb").next(),n.$current_clicked_element.is("a")&&n.$current_clicked_element.find("img, button").length?n.$current_clicked_element.find("img, button").first().addClass("dragging-imhwpb"):n.$current_clicked_element.addClass("dragging-imhwpb"),n.$current_clicked_element.is(n.content_selectors_string)?n.$master_container.find(n.column_selectors_string).addClass("receptor-containers-imhwpb"):n.$current_clicked_element.is(n.row_selectors_string)?n.$master_container.find(n.row_selectors_string).addClass("receptor-containers-imhwpb"):n.$current_clicked_element.is(n.column_selectors_string)&&(n.$master_container.find(n.column_selectors_string).addClass("receptor-containers-imhwpb"),n.$master_container.find(n.row_selectors_string).addClass("receptor-containers-imhwpb"))},this.drag_handle_mouseup=function(){n.remove_receptor_containers(),n.valid_drag=!1},this.master_container_mouse_up=function(e,o){if(n.resize&&n.end_resize(),n.$current_clicked_element&&n.$current_clicked_element.removeClass("dragging-imhwpb"),"undefined"==typeof o)var r=t(e.target);else var r=t(o);0==r.closest(".draggable-tools-imhwpb").length&&r.trigger("mouseenter")},this.decrease_row_size=function(e){var o=!1;return e.find(n.immediate_column_selectors_string).reverse().each(function(){var e=t(this);if(n.find_column_size(e)>=2)return n.change_column_size(e,!1),o=!0,!1}),o},this.get_border_mouse_location=function(e,t){var o,r,i=e[0].getBoundingClientRect(),a=Math.floor(i.left),l=Math.floor(i.right);return o=n.between(t,l-n.border_hover_buffer,l),r=n.between(t,a,a+n.border_hover_buffer),{left:r,right:o}},this.transform_layout=function(e,o){t.each(o,function(o,r){e.find(n.immediate_column_selectors_string).each(function(){var e=t(this);o==n.find_column_size(e)&&n.change_column_size(e,null,r)})})},this.find_layout_transform=function(e,t){var o=JSON.stringify(e),r=n.layout_translation[o];return"undefined"!=typeof t&&"undefined"!=typeof r&&"undefined"!=typeof r.current&&r.current!=t?r=null:"undefined"==typeof t&&"undefined"!=typeof r&&r.current&&(r=null),r},this.get_layout_format=function(e){var o=[];return e.find(n.immediate_column_selectors_string).each(function(){o.push(n.find_column_size(t(this)))}),o},this.change_column_size=function(e,o,r){if(e.length){var i=new RegExp(n.active_resize_class+"-[\\d]+","i");t.each(e.attr("class").split(" "),function(t,n){if(n.match(i)){var a=parseInt(n.replace(/\D/g,""));r?a=r:o===!1?a--:a++;var l=n.replace(/\d+/g,a),s=e.attr("class").replace(n,l);return e.attr("class",s),!1}}),n.$master_container.trigger(n.boldgrid_modify_event)}},this.find_column_size=function(e){var t,o,r=0;return e&&e.length?(t=new RegExp(n.active_resize_class+"-([\\d]+)","i"),o=e.attr("class").match(t),o&&(r=o[1]),parseInt(r)):r},this.find_row_size=function(e){var o=0;return e.find(n.immediate_column_selectors_string).not(".dragging-imhwpb").each(function(){o+=n.find_column_size(t(this))}),o},this.determine_class_sizes=function(){var e,t=n.$master_container.width();return e=t>1061?"col-md":t>837?"col-sm":"col-xs"},this.color_is=function(e,t){return n.color_alias[t].indexOf(e)!==-1};var m=function(e,t){if(t>=200)var n=1.25*t;else var n=250;e.css({"max-height":n+"px",overflow:"hidden"})};this.add_max_heights=function(){"column"==n.$current_drag.IMHWPB.type?n.$master_container.find(n.row_selectors_string).each(function(){var e=t(this),o=n.find_row_size(e);if(o<=12){var r=e.outerHeight();m(e,r)}}):"content"==n.$current_drag.IMHWPB.type&&m(n.$temp_insertion,n.$current_drag.IMHWPB.height)};var p=function(e){e.css({"max-height":"",overflow:""})};this.remove_max_heights=function(){"column"==n.$current_drag.IMHWPB.type?p(n.$master_container.find(n.row_selectors_string)):"content"==n.$current_drag.IMHWPB.type&&p(n.$temp_insertion)},this.get_other_top_level_elements=function(){return n.$body.find(n.immediate_row_siblings_string).not(n.$current_drag)},this.find_page_min_max=function(){var e={};if(n.$current_drag.IMHWPB.is_row){var t=n.get_other_top_level_elements(),o=t.eq(0),r=t.last();e={offset_top:o[0].getBoundingClientRect().top,offset_bottom:r[0].getBoundingClientRect().top+r.outerHeight(!0)}}return e},this.find_row_min_max=function(){var e={};if(n.$current_drag.IMHWPB.is_column){var t=n.$current_drag.closest(".row"),o=t.get(0),r=o.getBoundingClientRect();e={offset_left:r.left,offset_right:r.left+t.outerWidth(!0),offset_top:Math.max(0,r.top-150),offset_bottom:r.top+t.outerHeight(!0)}}return e},this.find_top_level_positions=function(){var e=[];if(n.$current_drag.IMHWPB.is_row){var o=n.get_other_top_level_elements();o.each(function(){var n=t(this),o=n.outerHeight(!0);e.push({max:this.getBoundingClientRect().top+o,element:n})})}return e},this.find_column_sibling_positions=function(){var e=[];return n.$current_drag.IMHWPB.is_column&&n.$current_drag.siblings(n.general_column_selectors_string).each(function(){var n=t(this),o=n.outerWidth(!0),r=this.getBoundingClientRect();e.push({max:r.left+o,element:n})}),e},this.recalc_col_pos=function(){n.$current_drag.IMHWPB.col_pos=n.find_column_sibling_positions(),n.$current_drag.IMHWPB.row_min_max=n.find_row_min_max()},this.recalc_row_pos=function(){n.$current_drag.IMHWPB.row_pos=n.find_top_level_positions(),n.$current_drag.IMHWPB.row_min_max=n.find_page_min_max()},this.reposition_column=function(e,o){if(n.$current_drag.IMHWPB.is_column&&0==n.$current_drag.IMHWPB.unlock_column){if(n.$current_drag.IMHWPB.row_min_max.offset_top>o||n.$current_drag.IMHWPB.row_min_max.offset_bottom<o){n.$current_drag.IMHWPB.unlock_column=!0;var i=n.entered_target.closest(n.row_selectors_string);return void(i.length&&n.move_column_to(n.entered_target))}if(e<n.$current_drag.IMHWPB.row_min_max.offset_left){var a=n.$current_drag.closest(n.row_selectors_string).find(n.immediate_column_selectors_string).not(n.$current_drag).eq(0);return void(a.get(0)!=n.$temp_insertion[0]&&(a.before(n.$temp_insertion),n.recalc_col_pos(),n.$master_container.trigger(n.boldgrid_modify_event)))}if(e>n.$current_drag.IMHWPB.row_min_max.offset_right){var l=n.$current_drag.closest(n.row_selectors_string).find(n.immediate_column_selectors_string).not(n.$current_drag).last();return void(l.get(0)!=n.$temp_insertion[0]&&(l.after(n.$temp_insertion),n.recalc_col_pos(),n.$master_container.trigger(n.boldgrid_modify_event)))}t.each(n.$current_drag.IMHWPB.col_pos,function(){if(e<this.max)return r[0]!=this.element[0]&&(r=this.element,this.element.nextAll().not(n.$current_drag).filter(n.$temp_insertion).length?this.element.before(n.$temp_insertion):this.element.prevAll(n.general_column_selectors_string).not(n.$current_drag).get(0)!=n.$temp_insertion[0]?this.element.before(n.$temp_insertion):this.element.after(n.$temp_insertion),n.$master_container.trigger(n.boldgrid_modify_event),n.recalc_col_pos(),!1)})}},this.fill_row=function(e,o){var r;return e<n.max_row_size&&(r=t('<div class="col-md-'+(n.max_row_size-e)+' col-sm-12 col-xs-12"></div>'),o.append(r)),r},this.setInheritedBg=function(e,o){n.color_is(e.css("background-color"),"transparent")&&e.parents().each(function(){var o=t(this),r=o.css("background-color");if(!n.color_is(r,"transparent"))return e.css("background-color",r),!1}),setTimeout(function(){n.color_is(e.css("background-color"),"transparent")&&e.css({"background-color":"white",color:"#333"})},o||100)},this.drag_handlers={hide_tooltips:function(){n.$current_drag||setTimeout(function(){n.$master_container.find(".draggable-tools-imhwpb").addClass("hidden")},100)},drop:function(e){n.$current_drag&&(n.prevent_default(e),n.drag_handlers.end(e),n.drag_drop_triggered=!0)},end:function(e){if(!n.drag_drop_triggered&&n.$current_drag)return n.restore_row=null,n.$most_recent_row_enter_add=null,n.remove_max_heights(),"actual"==n.dragImageSetting?n.slide_in_place(n.$current_drag,n.$temp_insertion):n.drag_cleanup(),!0},start:function(e){var o,r;n.valid_drag=!0,n.drag_drop_triggered=!1;var i=t(this),a=i.closest(".draggable-tools-imhwpb");n.$current_drag=a.next().addClass("dragging-imhwpb"),n.$master_container.addClass("drag-progress"),n.$current_drag.parent("a").length?n.original_html=n.$current_drag.parent("a")[0].outerHTML:n.original_html=n.$current_drag[0].outerHTML;var l=a.find(".popover-imhwpb");if(n.$current_drag.IMHWPB={right_popover:l.hasClass("right-popover-imhwpb"),column_popover:l.hasClass("column-popover-imhwpb"),is_column:n.$current_drag.is(n.column_selectors_string),is_row:n.$current_drag.is(n.row_selectors_string),is_content:n.$current_drag.is(n.content_selectors.join()),height:n.$current_drag.outerHeight(),width:n.$current_drag.outerWidth(),dragStarted:!0},n.$current_drag.IMHWPB.is_row&&i.hasClass("action-list")&&(n.$current_drag.IMHWPB.is_row=!1,n.$current_drag.IMHWPB.is_content=!0),n.$current_drag.IMHWPB.is_column){n.$current_drag.IMHWPB.column_size=n.find_column_size(n.$current_drag);var s=n.$current_drag.closest_context(n.row_selectors_string,n.$master_container);s.length&&(n.$current_drag.IMHWPB.original_row=s[0])}if(n.determine_current_drag_properties(),e.originalEvent.dataTransfer.setData("text"," "),e.originalEvent.dataTransfer.dropEffect="copy",n.$temp_insertion=t(n.original_html),n.$temp_insertion.removeClass("dragging-imhwpb"),n.$temp_insertion.addClass("cloned-div-imhwpb"),"actual"==n.dragImageSetting){if(n.$current_drag.css({height:n.$current_drag.IMHWPB.height,width:n.$current_drag.IMHWPB.width}).addClass("hidden dragging-started-imhwpb"),n.$current_drag.attr("data-mce-bogus","all"),n.setInheritedBg(n.$current_drag),"undefined"!=typeof e.originalEvent.dataTransfer.setDragImage&&!n.isSafari){var c=document.createElement("img");c.src="",e.originalEvent.dataTransfer.setDragImage(c,0,0)}}else"browserImage"==n.dragImageSetting&&(n.$cloned_drag_image=t(n.original_html),n.$cloned_drag_image.addClass("temporary-image-div"),document.body.appendChild(n.$cloned_drag_image[0]),e.originalEvent.dataTransfer.setDragImage(n.$cloned_drag_image[0],0,0),n.$current_drag.addClass("hidden"));n.$current_drag.before(n.$temp_insertion),n.$current_drag.IMHWPB.is_column?(n.$current_drag.IMHWPB.type="column",n.recalc_col_pos(),o=n.$current_drag.closest(".row"),r=n.find_row_size(o),r<n.max_row_size&&n.fill_row(r,o),r<=12&&"col-md"==n.active_resize_class&&n.$current_drag.siblings(n.unformatted_column_selectors_string).not(n.$temp_insertion).length?n.$current_drag.IMHWPB.unlock_column=!1:n.$current_drag.IMHWPB.unlock_column=!0):n.$current_drag.IMHWPB.is_row?(n.$current_drag.IMHWPB.type="row",n.recalc_row_pos()):n.$current_drag.IMHWPB.type="content",n.add_max_heights();var d=100;n.ie_version&&(d=150),setTimeout(function(){n.$current_drag.removeClass("hidden"),n.$master_container.trigger(n.drag_start_event),n.$master_container.find(".resizing-imhwpb").removeClass("resizing-imhwpb")},d),n.drag_handlers.initSmoothScroll()},over:function(e){if(n.$current_drag&&n.valid_drag&&(e.preventDefault(),!n.last_auto_scroll_event||n.last_auto_scroll_event+10<=(new Date).getTime())){if(n.last_auto_scroll_event=(new Date).getTime(),n.$current_drag.IMHWPB.dragStarted&&(o.Controls.$container.$current_drag.IMHWPB.is_row&&o.DRAG.Row.dragCursorPosition(e.originalEvent.pageY),n.reposition_column(e.originalEvent.pageX,e.originalEvent.pageY)),n.$html.hasClass("editing-as-row"))return;n.drag_handlers.autoScroll(e)}},initSmoothScroll:function(){var e=1;n.autoScrollSpeed=!1,n.scrollInterval=setInterval(function(){n.autoScrollSpeed&&window.scrollBy(0,n.autoScrollSpeed)},e)},autoScroll:function(e){var t="fixed"===n.$mce_32.css("position"),o=n.$mce_32[0].getBoundingClientRect();positionY=e.originalEvent.screenY-window.screenY,positionY<o.bottom+150&&t?n.autoScrollSpeed=-1:positionY>window.innerHeight+100?n.autoScrollSpeed=1:n.autoScrollSpeed=!1},leave_dragging:function(e){if(n.$current_drag){n.ie_version||e.preventDefault();var r=t(e.target),i=n.entered_target;if(n.prevent_duplicate_location_events(e)||!n.$current_drag)return!1;if(n.$temp_insertion[0]==i[0])return n.$most_recent_row_enter_add=null,!0;if(0==n.$master_container.has(i).length&&0==n.$current_drag.IMHWPB.is_content)return!0;if(n.$current_drag.IMHWPB.is_row)o.DRAG.Row.dragEnter(i);else if(n.$current_drag.IMHWPB.is_content){var a=r.closest_context(n.row_selectors_string,n.$master_container),l=!!a.parent().closest(i).length;if(l){r=r.closest_context(n.row_selectors_string,n.$master_container);var s=n.before_or_after_drop(r,{x:e.originalEvent.clientX,y:e.originalEvent.clientY});"before"==s?r.before(n.$temp_insertion):r.after(n.$temp_insertion)}else{if(0==n.$master_container.has(i).length)return!0;var c=i.parents(n.content_selectors_string).last();if(1==c.length&&(i=c),i.is(n.unformatted_content_selectors_string)&&i[0]!=n.$current_drag[0]&&(i.find(r).length||i[0]==r[0]))return!0;var d=i.closest_context(n.$current_drag.properties.parent,n.$master_container),u=d.length,g=!1,m=[];if(u){if(0==n.editting_as_row){var m=d.find(n.content_selectors_string+", .row:not(.row .row .row)").not(".dragging-imhwpb");g=m.length>0}else{var m=d.find(n.general_content_selector_string).not(".dragging-imhwpb");g=m.length>0,1==m.length&&m.find("[data-action]")&&(g=!1)}0==g&&(i=d)}var p=i.is(n.unformatted_column_selectors_string);p&&m.length&&0==i.find(r).length&&(i=m.last(),g=!1);var _=i.is(n.unformatted_content_selectors_string+",hr:not("+n.master_container_id+".row .row hr)");if(!_&&1==g)return!0;var f=i.closest(".cloned-div-imhwpb"),h=f.length&&f[0]==n.$temp_insertion[0];if(h)return n.$most_recent_row_enter_add=null,!0;if(_)i.is_before(n.$temp_insertion)?i.before(n.$temp_insertion):i.is_after(n.$temp_insertion)?i.after(n.$temp_insertion):i.before(n.$temp_insertion),n.$master_container.trigger(n.boldgrid_modify_event);else if(p){if($first_child=i.find(">:first-child"),$direct_descendents=i.find("> div"),$first_child.length&&1===$direct_descendents.length&&0==$first_child.is(n.column_selectors_string+", .draggable-tools-imhwpb")&&$first_child.is("div"))$first_child.prepend(n.$temp_insertion);else{var s=n.before_or_after_drop(i,{x:e.originalEvent.clientX,y:e.originalEvent.clientY});"before"==s?i.prepend(n.$temp_insertion):i.append(n.$temp_insertion)}n.$master_container.trigger(n.boldgrid_modify_event)}}}else if(n.$current_drag.IMHWPB.is_column&&n.$current_drag.IMHWPB.unlock_column){if(n.recent_event&&n.recent_event.entered==i[0]&&n.recent_event.left==r[0])return!0;if(n.recent_event={entered:i[0],left:r[0]},n.insertion_time+20>(new Date).getTime())return!0;if(0==i.is(n.unformatted_column_selectors_string)&&0==i.is(n.row_selectors_string)){var v=i.closest_context(n.column_selectors_string,n.$master_container);v.length&&(i=v)}if(0==n.$master_container.has(i).length)return!0;if(i[0]==n.$temp_insertion[0])return;if(i.siblings().filter(n.$temp_insertion).length&&i.is(n.unformatted_column_selectors_string)&&i[0]!=n.$current_drag[0]){var b=t(e.target);if(i.find(b).length||i[0]==b[0])return!0}n.move_column_to(i)}}},record_drag_enter:function(e){n.$current_drag&&(n.ie_version||e.preventDefault(),n.entered_target=t(e.target))}},this.get_ie_version=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var r=e.indexOf("Edge/");return r>0?parseInt(e.substring(r+5,e.indexOf(".",r)),10):void 0},this.checkIsSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},this.move_column_to=function(e){var t=e.is(n.unformatted_column_selectors_string),o=e.is(n.$current_drag.properties.parent),r=e.closest_context(n.row_selectors_string,n.$master_container),i=n.$temp_insertion.closest_context(n.row_selectors_string,n.$master_container),a=n.find_row_size(r);if(r.length&&i[0]!=r[0]){if(o&&a>=n.max_row_size)return!1;var l=n.$temp_insertion[0].innerHTML;n.restore_row&&(i.html(n.restore_row),n.$temp_insertion.html(l));var s=n.$current_drag.IMHWPB.original_row!=r[0];s?n.restore_row=r.html():n.restore_row=null;var c=a+n.$current_drag.IMHWPB.column_size<=n.max_row_size;if(0==c&&s){var d=n.max_row_size-a,u=null,g=9;if(d>0)u=d;else if(r.find(n.immediate_column_selectors_string).length<=g){u=3,n.$current_drag.IMHWPB.column_size<u&&(u=n.$current_drag.IMHWPB.column_size);for(var m=0;m<u;m++)n.decrease_row_size(r)}if(!u)return n.restore_row=null,!0;n.change_column_size(n.$temp_insertion,null,u)}else n.change_column_size(n.$temp_insertion,null,n.$current_drag.IMHWPB.column_size);t?e.before(n.$temp_insertion):r.append(n.$temp_insertion),n.record_recent_column_insertion()}else t&&(e.is_before(n.$temp_insertion)?e.before(n.$temp_insertion):e.after(n.$temp_insertion),n.record_recent_column_insertion())},this.record_recent_column_insertion=function(){n.recent_event={},n.insertion_time=(new Date).getTime(),n.$master_container.trigger(n.boldgrid_modify_event)},this.prevent_duplicate_location_events=function(e){var t,o=[e.originalEvent.pageX,e.originalEvent.pageY];return n.array_equal(n.current_drag_enter_event_loc,o)?t=!0:(n.current_drag_enter_event_loc=o,t=!1),t},this.createEmptyRow=function(){return t('<div class="row"><div class="col-md-12"></div></div>')},this.postAddRow=function(e){setTimeout(function(){n.$master_container.find(".added-element").removeClass("added-element")},1e3),n.$master_container.trigger(n.add_row_event,e.find(".col-md-12"))},this.insertEmptyRow=function(e,o){var r,i,a;e&&e.closest(".draggable-tools-imhwpb").length&&(r=e.closest(".draggable-tools-imhwpb")),(!r||!r.length&&tinymce&&tinymce.activeEditor)&&(i=tinymce.activeEditor.selection.getNode(),i&&(i=t(i),a=i.parents(".row").last(),a.length&&(r=a))),r&&r.length?r.before(o):n.$body.prepend(o)};var _=function(e,t){var n=e.closest(".draggable-tools-imhwpb").next();n.removeClass("align-column-top align-column-bottom align-column-center"),t&&n.addClass("align-column-"+t),e.closest(".popover-menu-imhwpb").addClass("hidden")};return this.menu_actions={generalMacro:function(e){e.stopPropagation();var n=t(this),r=n.data("action"),i=n.closest(".draggable-tools-imhwpb").next();i.click(),o.CONTROLS[r].openPanel()},alignTop:function(){_(t(this),"top")},alignBottom:function(){_(t(this),"bottom")},alignCenter:function(){_(t(this),"center")},alignDefault:function(){_(t(this))},delete_element:function(e){e.preventDefault();var o=t(this).closest(".draggable-tools-imhwpb");o.next().remove(),o.remove(),n.$master_container.trigger(n.delete_event)},unnest_row:function(e){var o=t(this).closest(".draggable-tools-imhwpb").next();o.length&&(t(o[0].outerHTML).insertBefore(o.parent().closest(".row")),n.wp_media_modal_action(e,o))},nest_row:function(e){},nest_row_old:function(e){var o=t(this).closest(".draggable-tools-imhwpb").next();if(o.length){var r=o.prevAll(".row").eq(0);r.length||(r=o.nextAll(".row").eq(0)),r.length||(r=t('<div class="row"><div class="col-md-8"></div></div>'),n.$body.prepend(r));var i=r.find(n.general_column_selectors_string).eq(0);i.length||(i=t("<div class='col-md-8'></div>"),r.prepend(i)),i.prepend(o[0].outerHTML)}},add_row:function(e){var o,r;e&&(r=t(this)),o=n.createEmptyRow(),n.insertEmptyRow(r,o),n.postAddRow(o)},add_column:function(e){e.preventDefault();var o,r=0,i=t(this),a=i.closest(".draggable-tools-imhwpb").next(),l=n.find_row_size(a),s=a.find("> *");if(1===s.length&&"BR"==s[0].tagName&&a.empty(),l<n.max_row_size&&l>=r)o=n.fill_row(l,a);else if(l>=n.max_row_size){var c=n.get_layout_format(a),d=n.find_layout_transform(c);d&&!d.current?(n.transform_layout(a,d),o=t('<div class="col-md-'+d["new"]+' col-sm-12 col-xs-12"></div>'),a.append(o)):(n.decrease_row_size(a),o=t('<div class="col-md-1 col-sm-12 col-xs-12"></div>'),a.append(o))}o.html("<p><br> </p>"),o.addClass("added-element"),setTimeout(function(){o.removeClass("added-element")},1e3),n.$master_container.trigger(n.add_column_event,o),i.closest(".popover-menu-imhwpb").addClass("hidden")},duplicate:function(e){e.preventDefault();var o=t(this),r=o.closest(".draggable-tools-imhwpb").next(),i=n.get_element_type(r);if("row"==i||"content"==i){var a=r.clone();a[0].popover=null,r.after(a)}else if("column"==i){var l=r.closest_context(n.row_selectors_string,n.$master_container),s=n.find_column_size(r),c=n.get_layout_format(l),d=n.find_layout_transform(c,s),u=1;if(n.find_row_size(l)+s<=n.max_row_size){var g=r.before(r[0].outerHTML);g[0].popover=null}else if(d)if(d.current){n.change_column_size(r,null,d.current_transform),u=d["new"];var g=r.before(r[0].outerHTML);g[0].popover=null,n.change_column_size(g,null,u),t.each(d.additional_transform,function(e,o){var r=0;l.find(n.immediate_column_selectors_string).reverse().each(function(){if(!(r<o.count))return!1;var e=t(this);n.find_column_size(e)==o.from&&(n.change_column_size(e,null,o.to),r++)})})}else{n.transform_layout(l,d),u=d["new"];var g=r.before(r[0].outerHTML);g[0].popover=null,n.change_column_size(g,null,u)}else if(s%2==0&&s){n.change_column_size(r,null,parseInt(s/2));var g=r.before(r[0].outerHTML);g[0].popover=null,n.change_column_size(g,null,parseInt(s/2))}else if(n.decrease_row_size(l)){var g=r.before(r[0].outerHTML);g[0].popover=null,n.change_column_size(g,null,u)}}n.$master_container.trigger(n.add_column_event),o.closest(".popover-menu-imhwpb").addClass("hidden"),n.ie_version&&n.refresh_handle_location()},clear:function(e){e.preventDefault();var o=t(this),r=o.closest(".draggable-tools-imhwpb").next(),i=n.get_element_type(r);"column"==i?(r.html("<p><br> </p>"),_(o)):r.find(":not("+n.column_selectors_string+"):not( "+n.row_selectors_string+")").remove(),n.refresh_handle_location(),o.closest(".popover-menu-imhwpb").addClass("hidden"),n.$master_container.trigger(n.clear_event,r)},add_media:function(e){var o=t(this);n.add_media_event_handler(o.closest(".draggable-tools-imhwpb").next()[0])},insert_layout:function(e){var o=t(this);n.insert_layout_event_handler(o.closest(".draggable-tools-imhwpb").next()[0])},trigger_action_click:function(e){var o=t(this);s.indexOf(o.data("action"))===-1&&(n.$boldgrid_menu_action_clicked=o.closest(".draggable-tools-imhwpb").next()[0],n.wp_media_modal_action(e,o)),n.$master_container.trigger(n.boldgrid_modify_event)}},this.wp_media_modal_action=function(e,t){e.preventDefault(),t.closest(".popover-menu-imhwpb").addClass("hidden"),n.window_mouse_leave()},this.typing_events={start:function(){n.$master_container.find(".draggable-tools-imhwpb").attr("contenteditable",!0),n.delete_popovers(),n.$master_container.find("html").addClass("boldgrid-is-typing")},end:function(){n.validate_markup(),n.$master_container.find("html").removeClass("boldgrid-is-typing"),n.update_handles(n.last_hover)}},this.resize_event_map={"mousemove.draggable":function(e,o){if(!n.resize){var r=n.pageX,i=!1;"undefined"!=typeof e&&null!=e&&(r=e.originalEvent.clientX,o=t(this),i=n.get_border_mouse_location(o,r)),i&&(i.left||i.right)?(o.addClass("resizing-imhwpb"),n.ie_version&&tinymce&&(tinymce.activeEditor.getBody().setAttribute("contenteditable",!1),tinymce.activeEditor.boldgridResize=!0)):(o.removeClass("resizing-imhwpb"),n.ie_version&&tinymce&&(tinymce.activeEditor.getBody().setAttribute("contenteditable",!0),tinymce.activeEditor.boldgridResize=!1))}n.$current_drag&&n.drag_handlers.end(e)},"mousedown.draggable":function(e){if($target=t(e.target),!$target.closest(".draggable-tools-imhwpb").length){var o=t(this),r=n.get_border_mouse_location(o,e.originalEvent.clientX),i=null;r.left?(i=o.prevAll(n.column_selectors_string).first(),o.addClass("resize-border-left-imhwpb")):r.right&&(i=o.nextAll(n.column_selectors_string).first(),o.addClass("resize-border-right-imhwpb")),(r.left||r.right)&&(i.length&&i.addClass("content-border-imhwpb"),n.$master_container.addClass("resizing-imhwpb"),n.$master_container.find(".resizing-imhwpb").removeClass("resizing-imhwpb"),n.remove_all_popovers(),n.$html.addClass("no-select-imhwpb"),n.resize={element:o,sibling:i,left:r.left,right:r.right})}}},this};var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.Menu={$element:null,$activeElement:null,$mceContainer:null,init:function(){return this.create(),this.setupMenuDrag(),this.$element},getTarget:function(e){return this.$element.targetData[e.name]},getCurrentTarget:function(){var e;return n.Panel.currentControl&&(e=n.Panel.currentControl.getTarget?n.Panel.currentControl.getTarget():t.getTarget(n.Panel.currentControl)),e},create:function(){this.$mceContainer=e("#"+tinymce.activeEditor.theme.panel._items[0]._id),this.$element=e(wp.template("boldgrid-editor-control-menu")()),this.$mceContainer.append(this.$element),this.$element.items=[]},setupMenuDrag:function(){this.$element.find("ul").draggable({containment:"#wp-content-editor-container",scroll:!1,axis:"x",cancel:"li"})},createListItem:function(t){var n,o=e("<li></li>").attr("data-action","menu-"+t.name),r=e("<span></span>").addClass(t.iconClasses);o.append(r),t.menuDropDown&&(n=e('<ul class="bg-editor-menu-dropdown"></ul>'),n.html('<li class="title">'+t.menuDropDown.title+"</li>"),e.each(t.menuDropDown.options,function(){n.append('<li class="'+this["class"]+'">'+this.name+"</li>")}),o.append(n)),t.tooltip&&o.append(wp.template("boldgrid-editor-tooltip")({message:t.tooltip})),this.$element.find("> ul").append(o)},activateControl:function(e){t.deactivateControl(),this.$activeElement=BOLDGRID.EDITOR.Menu.$element.find('[data-action="menu-'+e.name+'"]').addClass("active")},deactivateControl:function(){this.$activeElement&&(this.$activeElement.removeClass("active"),this.$activeElement=null)},reactivateMenu:function(){var e=BOLDGRID.EDITOR.Panel.$element;this.$activeElement&&e.is(":visible")&&this.$element.find('[data-action="menu-'+e.attr("data-type")+'"]').addClass("active")}},t=BOLDGRID.EDITOR.Menu}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.Panel={$element:null,currentControl:null,init:function(){return this.create(),this._setupPanelClose(),this._setupDrag(),this._setupCustomizeLeave(),this._setupCustomizeDefault(),this._lockPanelScroll(),this.$element},create:function(){this.$element=e(wp.template("boldgrid-editor-panel")()),e("body").append(this.$element)},setContent:function(e){this.$element.find(".panel-body").html(e)},setTitle:function(e){this.$element.find(".panel-title .name").html(e)},resetPosition:function(){this.$element.css({top:"",left:""})},setDimensions:function(e,t){this.$element.width(e),this.$element.height(t)},centerPanel:function(){var t=e(window),n=parseInt(this.$element.css("width")),o=parseInt(this.$element.css("height")),r=t.width(),i=t.height(),a=r/2-n/2,l=i/2-o/2;this.$element.css({top:l,left:a})},initScroll:function(n){var o=-66;n.panel&&n.panel.sizeOffset&&(o=n.panel.sizeOffset),e(".panel-body").slimScroll({destroy:!0}).attr("style",""),this.$element.find(t.getScrollTarget()).slimScroll({color:"#32373c",size:"8px",height:parseInt(n.panel.height)+o,alwaysVisible:!0,disableFadeOut:!0,wheelStep:5})},isOpenControl:function(e){var t=!1;return this.$element.is(":visible")&&this.$element.attr("data-type")==e.name&&(t=!0),t},_setupDrag:function(){this.$element.draggable({containment:"#wpwrap",handle:".panel-title",scroll:!1})},clearSelected:function(){this.$element.find(".selected").removeClass("selected")},_setupPanelResize:function(){this.$element.resizable()},_setupPanelClose:function(){this.$element.on("click",".close-icon",function(){t.closePanel()})},removeClasses:function(){n.Controls.$container.find(".bg-control-element").removeClass("bg-control-element")},closePanel:function(){t.$element.hide(),BOLDGRID.EDITOR.Menu.deactivateControl(),t.removeClasses(),t.$element.hasClass("customize-open")&&(this.$element.trigger("bg-customize-exit"),t.$element.removeClass("customize-open")),this.$element.find(".panel-body").empty(),this.$element.trigger("bg-panel-close"),tinymce.activeEditor.undoManager.add()},scrollToSelected:function(){var e,n,o=t.$element.find(".selected:not(.filters .selected):visible");t.scrollTo(0),o.length&&(n=0,t.currentControl.panel.scrollOffset&&(n=t.currentControl.panel.scrollOffset),e=o.position().top+n,t.scrollTo(e+"px"))},getScrollTarget:function(){var e=".panel-body";return t.currentControl&&t.currentControl.panel.scrollTarget&&(e=t.currentControl.panel.scrollTarget),e},scrollTo:function(e){this.$element.find(t.getScrollTarget()).slimScroll({scrollTo:e,alwaysVisible:!0,disableFadeOut:!0})},clear:function(){this.$element.find(".panel-title .name").empty(),this.$element.find(".panel-body").empty()},_enableFooter:function(e){e&&e.includeFooter?t.showFooter():t.hideFooter()},hideFooter:function(){this.$element.find(".panel-footer").hide()},showFooter:function(){this.$element.find(".panel-footer").show()},_setupCustomize:function(e){e.panel.customizeCallback&&t.$element.find(".panel-footer .customize .panel-button").on("click",function(n){n.preventDefault(),t.$element.trigger("bg-customize-open"),t.$element.addClass("customize-open"),t.$element.attr("data-type")==e.name&&t.currentControl.panel.customizeCallback!==!0&&e.panel.customizeCallback()})},_setupCustomizeDefault:function(){n.Panel;t.$element.find(".panel-footer .customize .panel-button").on("click",function(e){e.preventDefault(),t.currentControl&&t.currentControl.panel&&t.currentControl.panel.customizeCallback===!0&&(t.$element.find(".panel-body .customize").show(),t.$element.find(".presets").hide(),t.$element.find(".title").hide(),t.scrollTo(0),t.hideFooter())})},_setupCustomizeLeave:function(){n.Panel;t.$element.on("click",".back .panel-button",function(e){e.preventDefault(),t.$element.removeClass("customize-open"),t.currentControl&&t.currentControl.panel&&t.currentControl.panel.customizeLeaveCallback===!0&&(t.$element.find(".presets").show(),t.$element.find(".title").show(),t.$element.find(".panel-body .customize").hide(),t.toggleFooter(),t.scrollToSelected(),t.$element.trigger("bg-customize-exit"))})},toggleFooter:function(){t.$element.find(".panel-body .selected").length?t.showFooter():t.hideFooter()},collapseSelection:function(){"icon"!=t.currentControl.name&&tinyMCE.activeEditor.selection.collapse(!1)},_lockPanelScroll:function(){window.addEventListener&&(this.$element[0].addEventListener("DOMMouseScroll",t._onWheel,!1),this.$element[0].addEventListener("mousewheel",t._onWheel,!1))},_onWheel:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1},open:function(e){var o;tinymce.activeEditor.undoManager.add(),BOLDGRID.EDITOR.Menu.activateControl(e),this.currentControl=e,this.$element.addClass("ui-widget-content"),this.setDimensions(e.panel.width,e.panel.height),this.setTitle(e.panel.title),this.$element.attr("data-type",e.name),this._enableFooter(e.panel),this._setupCustomize(e),n.Tooltip.renderTooltips(),
this.$element.show(),this.initScroll(e),this.scrollToSelected(),this.collapseSelection(),BOLDGRID.EDITOR.CONTROLS.Generic.initControls(),t.removeClasses(),o=n.Menu.$element.targetData[e.name],o.addClass("bg-control-element"),n.CONTROLS.Color.initColorControls()}},t=BOLDGRID.EDITOR.Panel}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},function(e){"use strict";var t;t=BOLDGRID.EDITOR.FontRender={createLinkList:function(t){var n={};return t.find("[data-font-family]").each(function(){var t=e(this),o=t.attr("data-font-family");o&&(n[o]=n[o]||{})}),n},updateFontLink:function(n){var o,r,i,a="https://fonts.googleapis.com/css?",l=n.find("head"),s=l.find("#boldgrid-google-fonts");s.length||(s=e('<link id="boldgrid-google-fonts" rel="stylesheet">'),l.append(s)),o=t.createLinkList(n),r=[],e.each(o,function(e){r.push(e)}),r=r.join("|"),r&&(i=jQuery.param({family:r}),s.attr("href",a+i))}}}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.Tooltip={template:wp.template("boldgrid-editor-tooltip"),renderTooltips:function(){e.each(BoldgridEditor.builder_config.helpTooltip,function(o,r){n.Panel.$element.add(BOLDGRID.EDITOR.CONTROLS.Color.$colorPanel).find(o).each(function(){var n=e(this);!1===n.children().first().hasClass("boldgrid-tooltip-wrap")&&n.prepend(t.template({message:r}))})})}},t=BOLDGRID.EDITOR.Tooltip}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;n.Util={convertPxToEm:function(e,t){var n=0;return t=t?parseInt(t):0,e=e?parseInt(e):0,t&&e&&(n=(e/t).toFixed(1)),n},getClassesLike:function(t,n){var o=t.attr("class"),r=[],i=[];return r=o?o.split(" "):[],e.each(r,function(){0===this.indexOf(n)&&i.push(this)}),i}},t=BOLDGRID.EDITOR.Util}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;n.CONTROLS.Add={$element:null,name:"add",tooltip:"Add New Item",priority:1,iconClasses:"genericon genericon-plus add-element-trigger",selectors:["html"],menuDropDown:{title:"Add New",options:[{name:"Media","class":"action add-media dashicons dashicons-admin-media"},{name:"Button","class":"action font-awesome add-button"},{name:"Icon","class":"action font-awesome add-icon"},{name:"GridBlock","class":"action add-gridblock"},{name:"Section","class":"action add-row"}]},init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},onMenuClick:function(t){var n=e(this);n.toggleClass("active")},setup:function(){t.$element=e('[data-action="menu-add"]'),t._setupDimiss(),t._setupMenuClick()},elementClick:function(){t.$element.removeClass("active")},_setupMenuClick:function(){n.Menu.$element.find(".bg-editor-menu-dropdown").on("click",".action.add-gridblock",t.addGridblock).on("click",".action.add-row",t.addSection).on("click",".action.add-button",n.CONTROLS.Button.insertNew).on("click",".action.add-media",t.openAddMedia).on("click",".action.add-icon",n.CONTROLS.Icon.insertNew)},openAddMedia:function(){wp.media.editor.open(),wp.media.frame.setState("insert")},_setupDimiss:function(){e(document).on("click",function(n){!1===e(n.target).hasClass("add-element-trigger")&&t.$element.removeClass("active")})},scrollToElement:function(t,n){e("html, body").animate({scrollTop:t.offset().top},n)},addSection:function(){var o=BOLDGRID.EDITOR.Controls.$container,r=e(wp.template("boldgrid-editor-empty-section")());o.$body.prepend(r),t.scrollToElement(r,200),n.CONTROLS.Section.transistionSection(r)},addGridblock:function(){var e=BOLDGRID.EDITOR.Controls.editorMceInstance();e&&e.insert_layout_action()}},BOLDGRID.EDITOR.CONTROLS.Add.init(),t=BOLDGRID.EDITOR.CONTROLS.Add}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.Background={name:"background",tooltip:"Section Background",uploadFrame:null,priority:10,iconClasses:"genericon genericon-picture",selectors:[".boldgrid-section"],availableEffects:["background-parallax","background-fixed"],init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},panel:{title:"Section Background",height:"600px",width:"300px",scrollTarget:".presets",sizeOffset:-230},onMenuClick:function(e){t.openPanel()},_setupAddImage:function(){n.Panel.$element.on("click",".background-design .add-image-controls",function(){return t.uploadFrame?void t.uploadFrame.open():(t.uploadFrame=wp.media({title:"Select Background Image",library:{type:"image"},button:{text:"Use this media"},multiple:!1}),t.uploadFrame.on("select",function(){var e=t.uploadFrame.state().get("selection").first().toJSON();t.setImageBackground(e.url),t.setImageSelection("image")}),void t.uploadFrame.open())})},elementClick:function(){BOLDGRID.EDITOR.Panel.isOpenControl(this)&&t.openPanel()},setup:function(){t._setupBackgroundClick(),t._setupFilterClick(),t._setupCustomizeLeave(),t._setupBackgroundSize(),t._setupBackgroundColor(),t._setupGradientColor(),t._setupOverlayColor(),t._setupOverlayReset(),t._setupScrollEffects(),t._setupGradientDirection(),t._setupCustomization(),t._setupAddImage()},_setupBackgroundColor:function(){var o=n.Panel;o.$element.on("change",'.background-design [name="section-background-color"]',function(){var o=e(this),r=n.Menu.$element.targetData[t.name],i=o.val(),a=o.attr("data-type"),l=n.Panel.$element.find(".current-selection"),s=l.attr("data-type");r.removeClass(n.CONTROLS.Color.backgroundColorClasses.join(" ")),r.removeClass(n.CONTROLS.Color.textContrastClasses.join(" ")),n.Controls.addStyle(r,"background-color",""),"pattern"!=s&&(n.Controls.addStyle(r,"background-image",""),r.removeAttr("data-bg-color-1"),r.removeAttr("data-bg-color-2"),r.removeAttr("data-bg-direction")),"pattern"!=s&&n.Panel.$element.find(".presets .selected").removeClass("selected"),"class"==a?(r.addClass(n.CONTROLS.Color.getColorClass("background-color",i)),r.addClass(n.CONTROLS.Color.getColorClass("text-default",i))):n.Controls.addStyle(r,"background-color",i),t.setImageSelection(s,r.css("background"))})},_setupOverlayReset:function(){var o=n.Panel;o.$element.on("click",".background-design .overlay-color .default-color",function(o){o.preventDefault();var r=e(this),i=n.Menu.$element.targetData[t.name];r.closest(".color-controls").find("label").css("background-color","rgba(255,255,255,.5)"),i.removeAttr("data-bg-overlaycolor"),t.updateBackgroundImage()})},_setupOverlayColor:function(){var o=n.Panel;o.$element.on("change",'.background-design [name="overlay-color"]',function(){var o=e(this),r=o.attr("data-type"),i=o.val(),a=n.Menu.$element.targetData[t.name];"class"==r&&(i=BoldgridEditor.colors[i-1]),a.attr("data-bg-overlaycolor",i),t.updateBackgroundImage()})},updateBackgroundImage:function(){var e=n.Menu.$element.targetData[t.name],o=e.attr("data-bg-overlaycolor"),r=e.attr("data-image-url");o&&r?n.Controls.addStyle(e,"background-image",t.getOverlayImage(o)+', url("'+r+'")'):r&&n.Controls.addStyle(e,"background-image",'url("'+r+'")')},getOverlayImage:function(e){return"linear-gradient(to left, "+e+", "+e+")"},_setupGradientColor:function(){var o=n.Panel;o.$element.on("change",'.background-design [name^="gradient-color"]',function(){var o=e(this),r=n.Menu.$element.targetData[t.name],i=o.val(),a=o.attr("name"),l=o.attr("data-type");"class"==l&&(i=BoldgridEditor.colors[i-1]),"gradient-color-1"===a?r.attr("data-bg-color-1",i):r.attr("data-bg-color-2",i),n.Controls.addStyle(r,"background-image",t.createGradientCss(r))})},_setupCustomization:function(){var e=n.Panel;e.$element.on("click",".current-selection .settings .panel-button",function(e){e.preventDefault(),t.openCustomization()})},_setupScrollEffects:function(){var o=n.Panel;o.$element.on("change",'.background-design input[name="scroll-effects"]',function(o){var r=e(this),i=n.Menu.getTarget(t);"none"==r.val()?i.removeClass(t.availableEffects.join(" ")):(i.removeClass(t.availableEffects.join(" ")),i.addClass(r.val()))})},_setupGradientDirection:function(){var o=n.Panel;o.$element.on("change",'.background-design input[name="bg-direction"]',function(o){var r=e(this),i=n.Menu.getTarget(t);i.attr("data-bg-direction",r.val()),n.Controls.addStyle(i,"background-image",t.createGradientCss(i))})},createGradientCss:function(e){return"linear-gradient("+e.attr("data-bg-direction")+","+e.attr("data-bg-color-1")+","+e.attr("data-bg-color-2")+")"},_setupBackgroundSize:function(){var o=n.Panel;o.$element.on("change",'.background-design input[name="background-size"]',function(o){var r=e(this),i=n.Menu.getTarget(t);"tiled"==r.val()?(n.Controls.addStyle(i,"background-size","auto auto"),n.Controls.addStyle(i,"background-repeat","repeat")):"cover"==r.val()&&(n.Controls.addStyle(i,"background-size","cover"),n.Controls.addStyle(i,"background-repeat",""))})},_setupCustomizeLeave:function(){var e=n.Panel;e.$element.on("click",".background-design .back .panel-button",function(n){n.preventDefault(),e.$element.find(".preset-wrapper").show(),e.$element.find(".background-design .customize").hide(),t.preselectBackground(),e.scrollToSelected()})},_setupFilterClick:function(){var t=n.Panel;t.$element.on("click",".background-design .filter",function(n){n.preventDefault();var o=e(this),r=o.data("type"),i=o.data("label"),a=t.$element.find(".current-selection"),l=t.$element.find(".presets .background-color.section");t.$element.find(".filter").removeClass("selected"),o.addClass("selected"),t.$element.find(".presets .selection").hide(),e.each(r,function(){t.$element.find('.presets .selection[data-type="'+this+'"]').show()}),t.$element.find(".presets .title > *").text(i),t.$element.find(".presets").attr("data-filter",r),a.attr("data-filter",r),r.length&&-1!==r.indexOf("image")?l.hide():l.show(),t.scrollToSelected()})},removeColorClasses:function(e){e.removeClass(n.CONTROLS.Color.backgroundColorClasses.join(" ")),e.removeClass(n.CONTROLS.Color.textContrastClasses.join(" "))},_setupBackgroundClick:function(){var o=n.Panel;o.$element.on("click",".background-design .selection",function(){var r=e(this),i=n.Menu.getTarget(t),a=r.attr("data-image-url"),l=r.css("background-image"),s=r.css("background");return r.hasClass("selected")?(t.removeColorClasses(i),n.Controls.addStyle(i,"background",""),i.removeAttr("data-image-url"),r.removeClass("selected"),void t.preselectBackground(!0)):(o.$element.find(".presets .selected").removeClass("selected"),r.addClass("selected"),i.removeAttr("data-bg-color-1").removeAttr("data-image-url").removeAttr("data-bg-color-2").removeAttr("data-bg-direction"),"pattern"!==r.data("type")&&t.removeColorClasses(i),"image"==r.data("type")?t.setImageBackground(a):"color"==r.data("type")?(i.addClass(r.data("class")),i.addClass(n.CONTROLS.Color.getColorClass("text-default",r.data("class").replace(/\D/g,""))),n.Controls.addStyle(i,"background-image",""),t.setDefaultBackgroundColors()):"pattern"==r.data("type")?(n.Controls.addStyle(i,"background-size","auto auto"),n.Controls.addStyle(i,"background-repeat","repeat"),n.Controls.addStyle(i,"background-image",l)):"gradients"==r.data("type")?(n.Controls.addStyle(i,"background-image",l),i.attr("data-bg-color-1",r.data("color1")).attr("data-bg-color-2",r.data("color2")).attr("data-bg-direction",r.data("direction"))):n.Controls.addStyle(i,"background-image",l),void t.setImageSelection(r.data("type"),s))})},activateFilter:function(o){var r,i=!1,a=n.Menu.getTarget(t);n.Panel.$element.find(".current-selection .filter").each(function(){var t=e(this),n=t.data("type");if(o&&-1!==n.indexOf(o))return t.click(),i=!0,!1}),i||o||(r=a.css("background-image"),r&&"none"!==r&&(n.Panel.$element.find(".filter[data-type]:first-of-type").click(),i=!0)),!1===i&&n.Panel.$element.find('.filter[data-default="1"]').click()},setImageSelection:function(e,o){var r=n.Panel.$element.find(".current-selection"),i=n.Menu.getTarget(t);r.css("background",""),"color"==e?r.css("background-color",o):(r.css("background-color",i.css("background-color")),r.css("background-image",i[0].style["background-image"])),r.attr("data-type",e)},setImageBackground:function(e){var o=n.Menu.getTarget(t);o.attr("data-image-url",e),n.Controls.addStyle(o,"background",""),t.updateBackgroundImage(),n.Controls.addStyle(o,"background-size","cover")},_initSliders:function(){t._initVerticleSlider()},_initVerticleSlider:function(){var e=n.Menu.getTarget(t),o=e.css("background-position-y");o=o?parseInt(o):0,n.Panel.$element.find(".background-design .vertical-position .slider").slider({min:0,max:100,value:o,range:"max",slide:function(t,o){e.css("background-image")&&n.Controls.addStyle(e,"background-position","0% "+o.value+"%")}}).siblings(".value").html(o)},openCustomization:function(){n.Panel.$element.find(".preset-wrapper").hide(),n.Panel.$element.find(".background-design .customize").show(),n.Panel.$element.find(".preset-wrapper").attr("data-type",n.Panel.$element.find(".current-selection").attr("data-type")),t._initSliders(),t.selectDefaults(),n.Panel.$element.trigger("bg-open-customization")},selectDefaults:function(){t.setScrollEffect(),t.setSize(),t.setDefaultDirection(),t.setDefaultBackgroundColors(),t.setDefaultOverlayColor()},setDefaultOverlayColor:function(){var e=n.Menu.getTarget(t),o=n.Panel.$element.find(".overlay-color"),r=e.attr("data-bg-overlaycolor");r&&o.find("input").attr("value",r)},setSize:function(){var e=n.Panel.$element.find('input[name="background-size"]'),o=n.Menu.getTarget(t);-1===o.css("background-size").indexOf("cover")&&e.filter('[value="tiled"]').prop("checked",!0)},setScrollEffect:function(){var o=n.Menu.getTarget(t);e.each(t.availableEffects,function(){if(o.hasClass(this))return n.Panel.$element.find('input[name="scroll-effects"][value="'+this+'"]').prop("checked",!0),!1})},setDefaultDirection:function(){var e=n.Menu.getTarget(t),o=e.attr("data-bg-direction");t.backgroundIsGradient(e.css("background-image"))&&o&&n.Panel.$element.find('input[name="bg-direction"][value="'+o+'"]').prop("checked",!0)},setDefaultBackgroundColors:function(){var e,o,r=n.Menu.getTarget(t);t.backgroundIsGradient(r.css("background-image"))?(n.Panel.$element.find('input[name="gradient-color-1"]').attr("value",r.attr("data-bg-color-1")),n.Panel.$element.find('input[name="gradient-color-2"]').attr("value",r.attr("data-bg-color-2"))):(e=n.CONTROLS.Color.findAncestorColor(r,"background-color"),o=n.Panel.$element.find('input[name="section-background-color"]'),o.prev("label").css("background-color",e),o.attr("value",e))},randomGradientDirection:function(){var e=["to left","to bottom"];return e[Math.floor(Math.random()*e.length)]},_createGradients:function(){var n=[];e.each(BoldgridEditor.sample_backgrounds.default_gradients,function(){var e=this.colors[0],o=this.colors[1],r=t.randomGradientDirection();n.push({color1:e,color2:o,direction:r,css:"linear-gradient("+r+","+e+","+o+")"})}),console.log(JSON.stringify(n))},setPaletteGradients:function(){var n=[];BoldgridEditor.colors&&BoldgridEditor.colors.length&&e.each([0,1],function(){var e,o,r;e=BoldgridEditor.colors[Math.floor(Math.random()*BoldgridEditor.colors.length)],o=BoldgridEditor.colors[Math.floor(Math.random()*BoldgridEditor.colors.length)],e!=o&&(r=t.randomGradientDirection(),n.push({color1:e,color2:o,direction:r,css:"linear-gradient("+r+","+e+","+o+")"}))}),e.each(n,function(){BoldgridEditor.sample_backgrounds.gradients.unshift(this)})},backgroundIsGradient:function(e){return e.indexOf("linear-gradient")!==-1&&-1===e.indexOf("url")},preselectBackground:function(o){var r="color",i=n.Menu.getTarget(t),a=(i.attr("class"),i.css("background-color")),l=i.css("background-image"),s=n.Panel.$element.find(".current-selection"),c=t.backgroundIsGradient(l),d=!1;t.setImageSelection("image"),s.css("background-color",a),n.Panel.$element.find(".selection").each(function(){var n=e(this),o=n.data("type"),a=n.data("class");switch(o){case"color":if(a&&i.hasClass(a)&&"none"===i.css("background-image"))return n.addClass("selected"),r=o,d=!0,t.activateFilter(r),!1;break;case"image":if(n.attr("data-image-url")==i.attr("data-image-url"))return n.addClass("selected"),r=o,d=!0,t.activateFilter(r),!1;break;case"gradients":case"pattern":if(n.css("background-image")==l)return n.addClass("selected"),r=o,d=!0,t.activateFilter(r),!1}}),d||(c?r="gradients":"none"!=l&&(r="image"),o||t.activateFilter(r)),s.attr("data-type",r)},openPanel:function(){var e=n.Panel,o=wp.template("boldgrid-editor-background");BoldgridEditor.sample_backgrounds.color=n.CONTROLS.Color.getPaletteBackgroundColors(),e.clear(),t.setPaletteGradients(),e.$element.find(".panel-body").html(o({images:BoldgridEditor.sample_backgrounds,imageData:BoldgridEditor.builder_config.background_images})),t.preselectBackground(),t.setDefaultBackgroundColors(),e.open(t)}},BOLDGRID.EDITOR.CONTROLS.Background.init(),t=BOLDGRID.EDITOR.CONTROLS.Background}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.Box={uiBoxDimensions:{"bg-box bg-box-rounded":"box-wide","bg-box bg-box-rounded-bottom-left bg-box-rounded-bottom-right":"box-long","bg-box bg-box-rounded-bottom-right bg-box-rounded-top-right":"box-wide","bg-box bg-box-edged bg-box-shadow-bottom-right":"box-wide","bg-box bg-box-square bg-box-border-thin":"box-long","bg-box bg-box-square bg-box-border-thick":"box-wide","bg-box bg-box-square bg-box-border-dashed":"box-wide","bg-box bg-box-rounded bg-box-border-dashed":"box-long","bg-box bg-box-square bg-box-border-dashed-thick":"box-long","bg-box bg-box-square bg-box-border-double-thick":"box-wide"},namespace:"bg-box",name:"box",priority:20,iconClasses:"genericon genericon-gallery",tooltip:"Column Background",selectors:['.row [class*="col-md"]'],panel:{title:"Column Background",height:"530px",width:"290px",includeFooter:!0,customizeCallback:function(){t.openCustomizer()}},init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},colorControls:null,targetClasses:null,targetColor:null,$presets:null,onMenuClick:function(e){t.openPanel()},setup:function(){t._setupPresetClick(),t._setupPresetHover(),t._setupPanelLeave(),t._setupBackgroundColor(),t._setupBorderColor(),t._setupCustomizeLeave(),t._setupSliderChange();var e=t.getBoxMarkup();t.$presets=t.applyUiStyles(e)},_setupSliderChange:function(){n.Panel.$element.on("slidechange",".box-design .slider",function(){t._saveModuleClasses()})},_setupCustomizeLeave:function(){var e=n.Panel;e.$element.on("click",".box-design .back .panel-button",function(n){n.preventDefault(),e.$element.find(".presets").show(),e.$element.find(".box-design > .title").show(),e.$element.find(".box-design .customize").hide(),t.toggleFooter(),e.scrollToSelected()})},_setupPanelLeave:function(){var o=n.Panel;o.$element.on("mouseleave",".box-design",function(o){o.preventDefault();var r,i=(e(this),n.Menu.getTarget(t));r=t.findModule(i),t.removeModuleClasses(r),r.addClass(t.targetClasses),t.targetClasses&&-1!==t.targetClasses.indexOf("-background-color")||n.Controls.addStyle(r,"background-color",t.targetColor),t._applyCloneStyles(r)})},_applyCloneStyles:function(e){t.$targetModuleClone&&(e.attr("style",t.$targetModuleClone.attr("style")),e.attr("data-mce-style",t.$targetModuleClone.attr("style")))},_setupPresetHover:function(){var o=n.Panel;o.$element.hoverIntent({out:function(e){},over:function(n){n.preventDefault();var o=e(this);t.addBox(o)},selector:".box-design .presets ."+t.namespace})},_setupPresetClick:function(){var o=n.Panel;o.$element.on("click",".box-design .presets ."+t.namespace,function(r){r.preventDefault();var i,a=e(this);a.hasClass("selected")?(i=t.findModule(n.Menu.getTarget(t)),t.selfResetBorderClasses(i),o.clearSelected(),t.removeModuleClasses(i),o.hideFooter(),t._clearModuleClasses(),t._clearInlineStyles(i)):(t.addBox(a),o.clearSelected(),t._saveModuleClasses(),a.addClass("selected"),o.showFooter())})},_clearInlineStyles:function(e){e.css("padding",""),e.css("margin",""),e.css("background-color",""),e.css("border-color","")},_clearModuleClasses:function(){t.targetClasses="",t.targetColor="",t.$targetModuleClone=!1},_saveModuleClasses:function(){var e=t.findModule(n.Menu.getTarget(t));t.targetClasses=e.attr("class"),t.targetColor=e[0].style["background-color"],t.$targetModuleClone=e.clone()},openCustomizer:function(){var e=n.Panel;t._initSliders(),e.$element.find(".customize").show(),e.$element.find(".presets").hide(),e.$element.find(".box-design > .title").hide(),e.$element.find('.box-design [name="box-bg-color"]').val(t.getTarget().css("background-color")),t.setupBorderColor(),n.Panel.$element.trigger("bg-open-customization"),e.scrollTo(0),e.hideFooter()},setupBorderColor:function(){var e=n.Menu.getTarget(t),o=n.Panel.$element.find(".border-color-controls"),r=t.findModule(e);r.is('[class*="border"]')?(o.find('[name="box-border-color"]').val(r.css("border-color")),o.show()):o.hide()},findModule:function(t){var n,o=t.find("> div"),r=t.find("> *"),i=1==o.length&&o.not(".row").length&&o.not('[class*="col-md"]').length&&1==r.length;return i&&(n=o),n||(n=e("<div></div>"),n.html(r),t.html(n)),n},addBox:function(e){var o,r=n.Menu.getTarget(t),i=e.data("value"),a=e.css("background-color"),l=t.findModule(r);t._clearInlineStyles(l),t.selfResetBorderClasses(l),t.removeModuleClasses(l),e.parent(".my-designs").length&&(o=BoldgridEditor.builder_config.components_used.box[e.data("id")].style,l.attr("style",o)),l.addClass(i),l.attr("class")&&-1===l.attr("class").indexOf("-background-color")&&n.Controls.addStyle(l,"background-color",a)},removeModuleClasses:function(t){e.each(BoldgridEditor.builder_config.boxes,function(){t.removeClass(this)}),t.removeClass(n.CONTROLS.Color.backgroundColorClasses.join(" ")),t.removeClass(n.CONTROLS.Color.textContrastClasses.join(" ")),n.Controls.addStyle(t,"background-color","")},_initSliders:function(){t._initPaddingSlider(),n.CONTROLS.Generic.margin.bind()},_setupBackgroundColor:function(){var o=n.Panel;o.$element.on("change",'.box-design [name="box-bg-color"]',function(){var o=e(this),r=n.Menu.$element.targetData[t.name],i=t.findModule(r),a=o.val(),l=o.attr("data-type");i.removeClass(n.CONTROLS.Color.textContrastClasses.join(" ")),i.removeClass(n.CONTROLS.Color.backgroundColorClasses.join(" ")),n.Controls.addStyle(i,"background-color",""),"class"==l?(i.addClass(n.CONTROLS.Color.getColorClass("text-default",a)),i.addClass(n.CONTROLS.Color.getColorClass("background-color",a))):n.Controls.addStyle(i,"background-color",a),t._saveModuleClasses()})},selfResetBorderClasses:function(e){e.removeClass(n.CONTROLS.Color.borderColorClasses.join(" ")),n.Controls.addStyle(e,"border-color","")},_setupBorderColor:function(){var o=n.Panel;o.$element.on("change",'.box-design [name="box-border-color"]',function(){var o=e(this),r=n.Menu.$element.targetData[t.name],i=t.findModule(r),a=o.val(),l=o.attr("data-type");t.selfResetBorderClasses(i),"class"==l&&n.Controls.hasThemeFeature("border-color-classes")?i.addClass(n.CONTROLS.Color.getColorClass("border-color",a)):(""!==a&&(a=o.prev("label").css("background-color")),n.Controls.addStyle(i,"border-color",a)),t._saveModuleClasses()})},_initPaddingSlider:function(){var e,o,r=n.Menu.getTarget(t),i=t.findModule(r),a=i.css("font-size"),l=i.css("padding-top"),s=i.css("padding-left");l=l?parseInt(l):0,s=s?parseInt(s):0,e=n.Util.convertPxToEm(s,a),o=n.Util.convertPxToEm(l,a),n.Panel.$element.find(".box-design .padding .slider").slider({min:0,max:7,value:e,step:.1,range:"max",slide:function(e,o){r=n.Menu.getTarget(t),i=t.findModule(r),n.Controls.addStyle(i,"padding-left",o.value+"em"),n.Controls.addStyle(i,"padding-right",o.value+"em")}}).siblings(".value").html(e),n.Panel.$element.find(".box-design .padding-top .slider").slider({min:0,max:7,value:o,step:.1,range:"max",slide:function(e,o){r=n.Menu.getTarget(t),i=t.findModule(r),n.Controls.addStyle(i,"padding-top",o.value+"em"),n.Controls.addStyle(i,"padding-bottom",o.value+"em")}}).siblings(".value").html(o)},getTarget:function(){var e=n.Menu.getTarget(t);return t.findModule(e)},elementClick:function(){BOLDGRID.EDITOR.Panel.isOpenControl(this)&&t.openPanel()},applyUiStyles:function(t){var o,r="",i=0,a=[],l=n.CONTROLS.Color.getBackgroundForegroundColors(),s=["#2980b9","#bdc3c7","#e74c3c","rgb(224, 224, 224)","#f39c12","#ffffff"],c=["#fff","#000","rgb(236, 236, 236)"];return BoldgridEditor.is_boldgrid_theme?e.each(l,function(){a.push({color:this.color,colorClass:this.background+" "+this.text})}):c=s,e.each(c,function(){a.push({color:this})}),e.each(t,function(t){o=e(this),a[i].colorClass?(o.attr("data-value",o.data("value")+" "+a[i].colorClass),o.css("background-color",a[i].color)):o.css("background-color",a[i].color),o.attr("data-id",t),t%4===0&&0!==t&&i++,a[i]||(i=0),r+=o[0].outerHTML}),r},getBoxMarkup:function(){var n,o=BoldgridEditor.builder_config.boxes,r=[];return e.each(o,function(){n=t.uiBoxDimensions[this]||"",n+=" ",r.push("<div data-value='"+this+"' class='"+n+this+"'></div>")}),r},preselectBox:function(){var o=n.Menu.getTarget(t),r=t.findModule(o),i=r.attr("class"),a=[];i=i?i.split(" "):[],e.each(i,function(){0===this.indexOf("bg-box")&&a.push(this)}),a=a.join(" "),n.Panel.$element.find(".presets > div").each(function(){var t=e(this);if(a&&t.hasClass(a)&&t.css("background-color")==r.css("background-color"))return t.addClass("selected"),!1})},toggleFooter:function(){n.Panel.$element.find(".selected").length?n.Panel.showFooter():n.Panel.hideFooter()},styleMyDesigns:function(){var t=n.Controls.$container.$body;n.Panel.$element.find(".my-designs > *").each(function(){var n=e(this),o=n.data("id"),r=n.clone();r.css("display","none"),r.attr("style",BoldgridEditor.builder_config.components_used.box[o].style),t.append(r),n.css("background-color",r.css("background-color")),n.css("border-color",r.css("border-color")),r.remove()})},hideDuplicates:function(){var t=[];n.Panel.$element.find(".my-designs > *").each(function(){var n=e(this),o=n.attr("data-value")+n.css("background-color");-1===t.indexOf(o)?t.push(o):n.hide()})},_updateMyDesigns:function(){n.Controls.$container.$body.find(".bg-box").each(function(){var t,n,o=e(this);t={classes:o.attr("class"),style:o.attr("style")},n=!1,e.each(BoldgridEditor.builder_config.components_used.box,function(){if(this.style==t.style&&this.classes==t.classes)return n=!0,!1}),n||BoldgridEditor.builder_config.components_used.box.push(t)})},openPanel:function(){var e=n.Panel,o=wp.template("boldgrid-editor-box");t._saveModuleClasses(),t._updateMyDesigns(),e.clear(),e.$element.find(".panel-body").html(o({presets:t.$presets,myPresets:BoldgridEditor.builder_config.components_used.box,colorControls:t.colorControls})),t.styleMyDesigns(),t.hideDuplicates(),BOLDGRID.EDITOR.Panel.open(t),t.preselectBox(),e.$element.find(".grid").masonry({itemSelector:"."+t.namespace}),e.initScroll(t),e.scrollToSelected(),t.toggleFooter()}},BOLDGRID.EDITOR.CONTROLS.Box.init(),t=BOLDGRID.EDITOR.CONTROLS.Box}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.Button={name:"button",priority:80,tooltip:"Button Design",iconClasses:"fa fa-cog",selectors:[".btn","a.button","a.button-secondary","a.button-primary"],defaultColorClasses:[{color:"#eee",number:0},{color:"#229ffd",number:1},{color:"#ff414f",number:2},{color:"#a5de37",number:3},{color:"#feae1b",number:4},{color:"#7b72e9",number:5}],classes:[{name:"btn btn-3d btn-rounded"},{name:"btn btn-3d btn-pill"},{name:"btn btn-3d"},{name:"btn btn-raised btn-rounded"},{name:"btn btn-raised btn-pill"},{name:"btn btn-raised btn-small-caps"},{name:"btn btn-rounded btn-flat btn-small-caps"},{name:"btn btn-pill btn-flat"},{name:"btn btn-flat"},{name:"btn btn-longshadow btn-rounded"},{name:"btn btn-longshadow btn-small-caps btn-pill"},{name:"btn btn-longshadow btn-uppercase"},{name:"btn btn-glow btn-rounded"},{name:"btn btn-glow btn-pill btn-uppercase"},{name:"btn btn-glow"},{name:"btn btn-block btn-rounded"},{name:"btn btn-block btn-pill"},{name:"btn btn-block btn-small-caps"}],sizeClasses:["btn-tiny","btn-small","","btn-large","btn-jumbo","btn-giant"],init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},panel:{title:"Button Design",height:"500px",width:"315px",includeFooter:!0,customizeLeaveCallback:!0,customizeCallback:!0,customizeSupport:["margin"],customizeSupportOptions:{margin:{horMin:-30}}},setup:function(){t.applyColors(),t._setupPresetClick(),t._setupColorClick(),t._setupCustomizeOpen()},_setupCustomizeOpen:function(){var e=BOLDGRID.EDITOR.Panel;e.$element.on("bg-customize-open",function(){e.currentControl==t&&(t.sizeSlider.init(),n.Menu.getTarget(t).removeClass("bg-control-element"))}),e.$element.on("bg-customize-exit",function(){e.currentControl==t&&(t.preselect(),n.Panel.scrollToSelected(),t.toggleFooter())})},removeColorClasses:function(){var e=n.Menu.getTarget(t);e.removeClass("btn-neutral-color"),e.removeClass(function(e,t){return(t.match(/(^|\s)btn-color\S+/g)||[]).join(" ")})},_setupColorClick:function(){n.Panel.$element.on("click",".customize .button-color-controls .panel-selection",function(){var o=e(this),r=n.Menu.getTarget(t);t.removeColorClasses(),o.siblings().removeClass("selected"),o.addClass("selected"),r.addClass("btn-color-"+o.attr("data-preset"))})},_setupPresetClick:function(){var o=n.Panel;o.$element.on("click",".button-design .presets .panel-selection",function(){var r=e(this),i=r.data("preset"),a=n.Menu.getTarget(t);o.clearSelected(),r.addClass("selected"),a.attr("class",""),a.addClass(i),t.toggleFooter()})},insertNew:function(){var e;send_to_editor('<a class="button-primary bg-inserted-button" href="#">Button</a>'),e=n.Controls.$container.find(".bg-inserted-button").last(),n.Controls.$container.find(".bg-inserted-button").removeClass("bg-inserted-button"),n.Controls.$menu.targetData[t.name]=e,e.click(),t.openPanel()},onMenuClick:function(e){t.openPanel()},elementClick:function(){BOLDGRID.EDITOR.Panel.isOpenControl(this)&&t.openPanel()},applyColors:function(){var n,o=5,r=0;BoldgridEditor.colors.length&&(o=BoldgridEditor.colors.length,r=1),n=r,e.each(t.classes,function(e){o<n&&(n=r),0!==n&&(this.name+=" btn-color-"+n),(e+1)%4===0&&n++})},sizeSlider:{getDefault:function(){var o=2,r=n.Menu.getCurrentTarget();return e.each(t.sizeClasses,function(e){if(r.hasClass(this))return o=e,!1}),o},init:function(){var e=this.getDefault()+1,o=n.Menu.getCurrentTarget();n.Panel.$element.find(".section.button-size-control .value").html(e),n.Panel.$element.find(".section.button-size-control .slider").slider({min:1,max:6,value:e,range:"max",slide:function(e,n){o.removeClass(t.sizeClasses.join(" ")),n.value&&o.addClass(t.sizeClasses[n.value-1])}})}},getColorsMarkup:function(){var e=t.defaultColorClasses;return BoldgridEditor.is_boldgrid_theme&&n.Controls.hasThemeFeature("button-lib")&&(e=n.CONTROLS.Color.getColorsFormatted()),n.CONTROLS.Color.colorTemplate({colors:e,customColors:[]})},preselect:function(){var o=n.Menu.getTarget(t),r=n.Util.getClassesLike(o,"btn");r=e("<div>").addClass(r.join(" ")).removeClass("bg-control-element "+t.sizeClasses.join(" ")).attr("class"),o.hasClass("button-primary")?r="button-primary":o.hasClass("button-secondary")&&(r="button-secondary"),n.Panel.clearSelected(),n.Panel.$element.find('[data-preset="'+r+'"]:first').addClass("selected")},toggleFooter:function(){var e=n.Menu.getTarget(t);e.hasClass("btn")?n.Panel.showFooter():n.Panel.hideFooter()},_updateMyDesigns:function(){t.usedComponents=BoldgridEditor.builder_config.components_used.button.slice(0),n.Controls.$container.$body.find(".btn").each(function(){var n=e(this),o=n.clone().removeClass("bg-control-element "+t.sizeClasses.join(" ")),r=o.attr("class"),i=t.usedComponents,a=_.findIndex(i,function(e){return e.classes==r});-1===a&&i.push({style:o.attr("style"),classes:r})})},openPanel:function(){
var e=n.Panel,o=wp.template("boldgrid-editor-button");t._updateMyDesigns(),e.clear(),e.$element.find(".panel-body").html(o({text:"Button",presets:t.classes,myPresets:t.usedComponents,colors:t.getColorsMarkup()})),t.preselect(),e.open(t),t.toggleFooter(),e.$element.removeClass("ui-widget-content")}},BOLDGRID.EDITOR.CONTROLS.Button.init(),t=BOLDGRID.EDITOR.CONTROLS.Button}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;n.CONTROLS.Color={$currentInput:null,$colorPanel:null,$colorPicker:null,colorTemplate:wp.template("boldgrid-editor-color"),transparentColors:["rgba(0, 0, 0, 0)","transparent"],colorClasses:["color1-color","color2-color","color3-color","color4-color","color5-color"],textContrastClasses:["color-neutral-text-default","color1-text-default","color2-text-default","color3-text-default","color4-text-default","color5-text-default"],backgroundColorClasses:["color-neutral-background-color","color1-background-color","color2-background-color","color3-background-color","color4-background-color","color5-background-color"],borderColorClasses:["color1-border-color","color2-border-color","color3-border-color","color4-border-color","color5-border-color"],customColors:BoldgridEditor.saved_colors,init:function(){return t._create(),t._setupClosePicker(),t._renderColorOptions(),t._setupPanelDrag(),t._setupAddNew(),t._setupColorPicker(),t._setupCallback(),t._setupColorPreview(),t._setupRemove(),t._setupAutoHide(),t._setupResetDefault(),t._addPanelClasses(),t._setupOpenCustomization(),t},_addPanelClasses:function(){BoldgridEditor.is_boldgrid_theme||t.$colorPanel.addClass("non-bg-theme")},_setupResetDefault:function(){t.$colorPanel.find(".wp-picker-default").on("click",function(e){e.preventDefault(),e.stopPropagation(),t.$currentInput.attr("data-type","color"),t.$currentInput.val("").change(),t.$colorPanel.find(".selected").removeClass("selected"),t.$currentInput.parent().find("label").css("background-color","#333")})},_setupOpenCustomization:function(){n.Panel.$element.on("bg-open-customization",function(){t.initColorControls()})},_setupAutoHide:function(){e("body").on("click",function(){t.closePicker()}),t.$colorPanel.on("click",function(e){e.stopPropagation()})},getColorClass:function(e,t){return"color"+t+"-"+e},openPicker:function(e){t.$colorPanel.show(),t.$currentInput=e,tinymce.activeEditor.undoManager.add()},closePicker:function(){t.$colorPanel.is(":visible")&&(tinymce.activeEditor.undoManager.add(),t.$colorPanel.hide(),t.$currentInput=null,t.saveCustomColors())},saveCustomColors:function(){e('#post input[name="boldgrid-custom-colors"]').val(JSON.stringify(t.customColors))},_setupColorPreview:function(){n.Panel.$element.on("click",".color-preview",function(o){o.stopPropagation();var r,i=e(this),a=n.Panel.$element.find('input[name="'+i.attr("for")+'"]');"color"!=a.attr("data-type")&&a.attr("data-type")?"class"==a.attr("data-type")&&(r=t.$colorPanel.find('.panel-selection[data-preset="'+a.val()+'"]')):t.$colorPanel.find('[data-type="custom"].panel-selection').each(function(){var t=e(this);if(i.css("background-color")==t.css("background-color"))return r=t,!1}),t.$colorPanel.find(".panel-selection.selected").removeClass("selected"),t.$colorPicker.iris("color",i.css("background-color")),t.openPicker(a),r&&r.length&&t.selectColor(r)}),n.Panel.$element.on("change","input.color-control",function(){var o=e(this),r=n.Panel.$element.find('.color-preview[for="'+o.attr("name")+'"]');r.css("background-color",t.$colorPicker.iris("color"))})},_setupClosePicker:function(){t.$colorPanel.find(".panel-title .close-icon").on("click",function(){t.closePicker()})},_setupPanelDrag:function(){this.$colorPanel.draggable({containment:"#wpwrap",handle:".panel-title",scroll:!1})},findAncestorColor:function(n,o){var r,i=[];return i.push(n),n.parents().each(function(){i.push(this)}),e.each(i,function(){var n=e(this),i=n.css(o);if(!1===t.isColorTransparent(i))return r=i,!1}),r},getPaletteBackgroundColors:function(){var t={};return e.each(BoldgridEditor.colors,function(e){t["color"+(e+1)+"-background-color"]=this}),t},getBackgroundForegroundColors:function(){var t,o=[];return e.each(BoldgridEditor.colors,function(e){t=e+1,o.push({color:this,colorNum:t,text:n.CONTROLS.Color.getColorClass("text-default",t),background:n.CONTROLS.Color.getColorClass("background-color",t)})}),o},isColorTransparent:function(e){return n.CONTROLS.Color.transparentColors.indexOf(e)!==-1||!e},initColorControls:function(){n.Menu.getTarget(BOLDGRID.EDITOR.Panel.currentControl);n.Panel.$element.find("input.color-control").each(function(){var n=e(this),o="color",r=n.val(),i=n.prev("label");!1===t.isColorTransparent(r)&&i.css("background-color",r),n.attr("data-type",o)})},_setupColorPicker:function(){var n="color",o="#e3e",r=t.$colorPanel.find(".panel-selection.selected[data-preset]");r.length&&(o=r.css("background-color")),t.$colorPicker=t.$colorPanel.find(".boldgrid-color-picker"),t.$colorPicker.val(o),t.$colorPicker.wpColorPicker({mode:"hsl",defaultColor:o,change:function(o,r){var i=e(this),a=r.color.toCSS(),l=i.closest(".color-control").find(".colors .panel-selection.selected[data-preset]");return l.length&&l.is('[data-type="default"]')?void t._copyColor():(l=t.$colorPanel.find(".colors .panel-selection.selected[data-preset]"),l.length&&(l.css("background-color",a),l.attr("data-preset",a),t.customColors[l.attr("data-index")]=a),void(t.$currentInput&&(t.$currentInput.attr("data-type",n),t.$currentInput.attr("value",a),t.$currentInput.change())))},hide:!1,palettes:!0})},_copyColor:function(e){var n,o;o=t.$colorPanel.find(".colors .panel-selection.selected").css("background-color"),o||(o=t.$colorPicker.iris("color")),t.customColors.push(o),t._renderColorOptions(),n=t.$colorPanel.find(".color-control"),n.find("ul.colors").removeClass("selected"),t.$colorPicker.iris("color",o),t.selectColor(n.find(".my-colors li:last-of-type"))},_setupAddNew:function(){t.$colorPanel.on("click",".colors .panel-selection.custom-color",function(){t._copyColor()})},_renderColorOptions:function(){t.$colorPanel.find(".colors-wrap").html(t.colorTemplate({colors:t.getColorsFormatted(),customColors:t.customColors})),BOLDGRID.EDITOR.Tooltip.renderTooltips()},getColorsFormatted:function(){var t=[];return e.each(BoldgridEditor.colors,function(e){var n=e+1;t.push({color:this,number:n})}),t},_create:function(){var n=wp.template("boldgrid-editor-color-panel");t.$colorPanel=e(n()),e("body").append(t.$colorPanel)},_setupRemove:function(){t.$colorPanel.on("click",".color-picker-wrap .cancel",function(n){var o,r,i,a=e(this);n.preventDefault(),r=a.closest(".color-control"),r.find(".custom-color").removeClass("selected"),o=r.find('.colors .selected[data-type="custom"]'),o.length&&(t.customColors.splice(o.attr("data-index"),1),o.remove(),i=t.$colorPanel.find(".panel-selection").first(),t.$colorPicker.iris("color",i.css("background-color")),t.selectColor(i))})},selectColor:function(e){t.$colorPanel.find(".selected").removeClass("selected"),e.addClass("selected"),e.is('[data-type="custom"]')?t.$colorPanel.attr("current-selection","custom"):t.$colorPanel.attr("current-selection","default")},_setupCallback:function(){t.$colorPanel.on("click",".colors .panel-selection",function(n){var o,r=e(this);r.hasClass("custom-color")||(o="default"==r.data("type")?"class":"color",t.$colorPanel.find("ul.colors .panel-selection").removeClass("selected"),t.$colorPicker.iris("color",r.css("background-color")),t.selectColor(r),t.$currentInput.val(r.attr("data-preset")),t.$currentInput.attr("data-type",o),t.$currentInput.change())})}},t=BOLDGRID.EDITOR.CONTROLS.Color}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.Container={name:"container",tooltip:"Section Width",priority:15,iconClasses:"fa fa-arrows-h",selectors:[".boldgrid-section .container",".boldgrid-section .container-fluid"],init:function(){},onMenuClick:function(){t.toggleSectionWidth()},transitionSize:function(t){n.Controls.$container.find("html").addClass("bg-disabled-handles"),t.css("transition","width .5s"),setTimeout(function(){t.css("transition",""),e(window).trigger("resize"),BOLDGRID.EDITOR.CONTROLS.Section.positionHandles(),BOLDGRID.EDITOR.RESIZE.Row.positionHandles(),n.Controls.$container.find("html").removeClass("bg-disabled-handles")},600)},toggleSectionWidth:function(e){e||(e=n.Controls.$menu.targetData[t.name].closest(".container, .container-fluid")),e.hasClass("container")?(t.transitionSize(e),e.addClass("container-fluid"),e.removeClass("container")):(t.transitionSize(e),e.addClass("container"),e.removeClass("container-fluid"))}},BOLDGRID.EDITOR.CONTROLS.Container.init(),t=BOLDGRID.EDITOR.CONTROLS.Container}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.Font={name:"font",tooltip:"Font",priority:30,iconClasses:"fa fa-text-width",selectors:["p, h1, h2, h3, h4, h5, h6, table, section, ul, ol, dl"],exceptionSelector:"img, .draggable-tools-imhwpb *",templateMarkup:null,fontClasses:["bg-font-family-alt","bg-font-family-body","bg-font-family-heading","bg-font-family-menu"],init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},panel:{title:"Text Setting",height:"450px",width:"268px"},setup:function(){t._setupEffectClick(),n.CONTROLS.Generic.fontColor.bind(),t.templateMarkup=wp.template("boldgrid-editor-font")({textEffectClasses:BoldgridEditor.builder_config.textEffectClasses,fonts:BoldgridEditor.builder_config.fonts,themeFonts:t.getThemeFonts(),myFonts:BoldgridEditor.builder_config.components_used.font}),t.bindFontCollpase(),n.FontRender.updateFontLink(n.Controls.$container)},bindFontCollpase:function(){var t=_.debounce(function(){var t=e(".font-family-dropdown");t.hasClass("ui-selectmenu-open")&&t.removeClass("ui-selectmenu-open")},50);e(window).on("scroll",t)},getThemeFonts:function(){var e=[];return-1!==BoldgridEditor.builder_config.theme_features.indexOf("theme-fonts-classes")&&(e=BoldgridEditor.builder_config.theme_fonts),e},_setupEffectClick:function(){var o=n.Panel;o.$element.on("click",".section.effects .panel-selection",function(){var o=e(this),r=n.Menu.$element.targetData[t.name];e.each(BoldgridEditor.builder_config.textEffectClasses,function(){r.removeClass(this.name)}),r.addClass(o.data("preset")),o.siblings().removeClass("selected"),o.addClass("selected")})},onMenuClick:function(){t.openPanel()},charSpacingSlider:function(e){var t=e.css("letter-spacing"),o=t?parseInt(t):0;n.Panel.$element.find(".section.spacing .character .value").html(o),n.Panel.$element.find(".section.spacing .character .slider").slider({step:.1,min:-.3,max:5,value:o,range:"max",slide:function(t,o){n.Controls.addStyle(e,"letter-spacing",o.value)}})},lineSpacingSlider:function(e){var t=e.css("line-height"),o=n.Util.convertPxToEm(t,e.css("line-height"));n.Panel.$element.find(".section.spacing .line .value").html(o),n.Panel.$element.find(".section.spacing .line .slider").slider({step:.1,min:.5,max:3,value:o,range:"max",slide:function(t,o){n.Controls.addStyle(e,"line-height",o.value+"em")}})},elementClick:function(e){BOLDGRID.EDITOR.Panel.isOpenControl(this)&&(t.openPanel(),n.Panel.$element.find('label[for="font-color"]').is(":visible")&&(e.boldgridRefreshPanel=!0,n.CONTROLS.Color.$currentInput=n.Panel.$element.find('input[name="font-color"]')))},_initTextColor:function(e){var o="#333";n.Panel.$element.find('[name="font-color"]').data("type","color").val(o),t._hideButtonColor()},_hideButtonColor:function(){var e,o="> .btn, > .button-primary, > .button-secondary, > a",r=n.Panel.$element.find(".color-preview"),i=n.Menu.getTarget(t);e=i.clone(),e.find(o).remove(),!e.text().replace(/ /g,"").length&&i.find(o).length&&r.hide()},_initFamilyDropdown:function(){var o,r=n.Panel;e.widget("custom.fontfamilyselect",e.ui.selectmenu,{_renderItem:function(t,n){return e("<li>").data("ui-autocomplete-item",n).attr("data-value",n.label).attr("data-type",n.element.data("type")).attr("data-index",n.element.data("index")).append(n.label).appendTo(t)},_renderMenu:function(t,n){var o=this;e.each(n,function(e,n){o._renderItemData(t,n)}),t.parent().addClass("font-family-dropdown"),t.addClass("selectize-dropdown-content"),t.find('[data-type="theme"]:first').before('<h3 class="seperator">Theme Fonts</h3>'),t.find('[data-type="custom"]:first').before('<h3 class="seperator">My Fonts</h3>'),t.find('[data-type="all"]:first').before('<h3 class="seperator">All Fonts</h3>'),setTimeout(function(){t.find(".seperator").removeClass("ui-menu-item")})}}),r.$element.find(".selectize-dropdown-content select").fontfamilyselect({select:function(e,r){var i=n.Menu.getTarget(t);return o.attr("data-value",r.item.label),i.removeAttr("data-font-family").removeAttr("data-font-class"),i.removeClass(t.fontClasses.join(" ")),"Default"===r.item.label?void n.Controls.addStyle(i,"font-family",""):("theme"==r.item.element.data("type")?(i.addClass(r.item.element.data("index")),i.attr("data-font-class",r.item.element.data("index")),n.Controls.addStyle(i,"font-family","")):(i.attr("data-font-family",r.item.label),n.Controls.addStyle(i,"font-family",r.item.label)),void n.FontRender.updateFontLink(n.Controls.$container))}}),o=t.getFamilySelection(),t.preselectFamily()},getFamilySelection:function(){return n.Panel.$element.find(".section.family .ui-selectmenu-button")},preselectFamily:function(){var e,o="Default",r=t.getFamilySelection(),i=n.Menu.getTarget(t);i.is("."+t.fontClasses.join(",."))?(e=i.attr("data-font-class"),o=n.Panel.$element.find('.section.family [data-index="'+e+'"]').data("value")):i.attr("data-font-family")&&(o=i.attr("data-font-family")),r.attr("data-value",o)},setTextColorInput:function(){var e,o=n.Menu.getTarget(t);e=n.CONTROLS.Color.findAncestorColor(o,"color"),n.Panel.$element.find('input[name="font-color"]').attr("value",e)},setTextEffect:function(){var e=n.Menu.getTarget(t),o=n.Panel.$element.find(".panel-body .section.effects"),r=n.Util.getClassesLike(e,"bg-text-fx");o.find(".panel-selection.selected").removeClass("selected"),r.length?o.find(".panel-selection").find("."+r.join(".")).closest(".panel-selection").addClass("selected"):o.find(".none-selected").addClass("selected")},selectPresets:function(){t.setTextColorInput(),t.setTextEffect()},openPanel:function(){var e=n.Panel,o=n.Menu.getTarget(t);e.clear(),e.$element.find(".panel-body").html(t.templateMarkup),t.charSpacingSlider(o),t.lineSpacingSlider(o),t._initTextColor(o),t._initFamilyDropdown(),t.selectPresets(),e.open(t),e.scrollTo(0),n.CONTROLS.Generic.fontSize.bind()}},BOLDGRID.EDITOR.CONTROLS.Font.init(),t=BOLDGRID.EDITOR.CONTROLS.Font}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;n.CONTROLS.Generic={defaultCustomize:wp.template("boldgrid-editor-default-customize"),createCustomizeSection:function(){n.Panel.$element.find(".choices").append(t.defaultCustomize())},initControls:function(){var o=n.Panel.currentControl.panel.customizeSupport||[],r=n.Panel.currentControl.panel.customizeSupportOptions||!1;o.length&&!n.Panel.$element.find(".panel-body .customize").length&&t.createCustomizeSection(),e.each(o,function(){var e={};r&&r[this]&&(e=r[this]),t[this].render(e),t[this].bind(e)})},setupInputCustomization:function(){n.Panel.$element.on("change",".class-control input",function(){var t=e(this),o=t.attr("name"),r=n.Menu.getCurrentTarget(),i=[],a=t.closest(".class-control").find('input[name="'+o+'"]');a.each(function(){i.push(e(this).attr("value"))}),r.removeClass(i.join(" ")),r.addClass(t.val())})},setupInputInitialization:function(){var t=BOLDGRID.EDITOR.Panel;t.$element.on("bg-customize-open",function(){var o=n.Menu.getCurrentTarget();t.$element.find(".class-control input[default]").prop("checked",!0),t.$element.find(".class-control input").each(function(){var t=e(this);o.hasClass(t.attr("value"))&&t.prop("checked",!0)})})},margin:{template:wp.template("boldgrid-editor-margin"),render:function(){n.Panel.$element.find(".panel-body .customize").find(".section.margin-control").remove(),n.Panel.$element.find(".panel-body .customize").append(this.template())},bind:function(e){e||(e={});var t=e.vertMin||0,o=e.horMin||-15,r=n.Menu.getCurrentTarget(),i=r.css("margin-top"),a=r.css("margin-left");i=i?parseInt(i):0,a=a?parseInt(a):0,n.Panel.$element.find(".panel-body .customize .margin .slider").slider({min:o,max:50,value:a,range:"max",slide:function(e,t){r=n.Menu.getCurrentTarget(),n.Controls.addStyle(r,"margin-left",t.value),n.Controls.addStyle(r,"margin-right",t.value)}}).siblings(".value").html(a),n.Panel.$element.find(".panel-body .customize .margin-top .slider").slider({min:t,max:200,value:i,range:"max",slide:function(e,t){r=n.Menu.getCurrentTarget(),n.Controls.addStyle(r,"margin-top",t.value),n.Controls.addStyle(r,"margin-bottom",t.value)}}).siblings(".value").html(i)}},rotate:{classes:["fa-rotate-90","fa-rotate-180","fa-rotate-270"],getDefault:function(){var e=n.Menu.getCurrentTarget(),t=0;return e.hasClass("fa-rotate-90")?t=90:e.hasClass("fa-rotate-180")?t=180:e.hasClass("fa-rotate-270")&&(t=270),t},template:wp.template("boldgrid-editor-rotate"),render:function(){n.Panel.$element.find(".panel-body .customize").find(".section.rotate-control").remove(),n.Panel.$element.find(".panel-body .customize").append(this.template())},bind:function(){var e=this.getDefault(),o=n.Menu.getCurrentTarget();n.Panel.$element.find(".section.rotate-control .value").html(e),n.Panel.$element.find(".section.rotate-control .slider").slider({min:0,step:90,max:270,value:e,range:"max",slide:function(e,n){o.removeClass(t.rotate.classes.join(" ")),n.value&&o.addClass("fa-rotate-"+n.value)}})}},insertLink:{template:wp.template("boldgrid-editor-insert-link"),render:function(){n.Panel.$element.find(".panel-body .customize").find(".section.insert-link").remove(),n.Panel.$element.find(".panel-body .customize").append(this.template())},bind:function(){n.Panel.$element.find(".section.insert-link").on("click",function(){var e=n.Menu.getTarget(n.Panel.currentControl);tinymce.activeEditor.selection.select(e[0]),tinymce.activeEditor.execCommand("WP_Link")})}},fontSize:{template:wp.template("boldgrid-editor-font-size"),render:function(){n.Panel.$element.find(".panel-body .customize").find(".section.size").remove(),n.Panel.$element.find(".panel-body .customize").append(this.template())},bind:function(){var e=n.Menu.getTarget(n.Panel.currentControl),t=e.css("font-size"),o=t?parseInt(t):14;o=o>=5?o:14,n.Panel.$element.find(".section.size .value").html(o),n.Panel.$element.find(".section.size .slider").slider({min:5,max:115,value:o,range:"max",slide:function(t,o){n.Panel.$element.find(".section.size .value").html(o.value),n.Controls.addStyle(e,"font-size",o.value)}})}},fontColor:{bound:!1,template:wp.template("boldgrid-editor-font-color"),render:function(){var e=n.Menu.getTarget(n.Panel.currentControl);n.Panel.$element.find(".panel-body .customize").find(".section.font-color").remove(),n.Panel.$element.find(".panel-body .customize").append(this.template()),n.Panel.$element.on("bg-customize-open",function(){n.Panel.$element.find(".panel-body .customize").find(".section.font-color label").css("background-color",e.css("color"))})},bind:function(){var t=n.Panel;return!this.bound&&(t.$element.on("change",'.section [name="font-color"]',function(){var t=e(this),o=n.Menu.getTarget(n.Panel.currentControl),r=t.attr("value"),i=t.attr("data-type");o.removeClass(n.CONTROLS.Color.colorClasses.join(" ")),n.Controls.addStyle(o,"color",""),"class"==i?o.addClass(n.CONTROLS.Color.getColorClass("color",r)):n.Controls.addStyle(o,"color",r)}),void(this.bound=!0))}}},t=BOLDGRID.EDITOR.CONTROLS.Generic}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.Icon={name:"icon",priority:80,tooltip:"Icon Design",iconClasses:"fa fa-cog",selectors:[".fa"],panel:{title:"Change Icon",height:"500px",width:"335px",includeFooter:!0,customizeLeaveCallback:!0,customizeCallback:function(){t.openCustomizer()},customizeSupport:["fontColor","fontSize","margin","rotate"],customizeSupportOptions:{margin:{horMin:-30}}},template:wp.template("boldgrid-editor-icon"),init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},setup:function(){t._setupClosePanel(),t._setupCustomizeLeave()},elementClick:function(){t.openPanel()},_setupCustomizeLeave:function(){n.Panel.$element.on("bg-customize-exit",function(){t.name===n.Panel.currentControl.name&&t.highlightElement()})},_setupClosePanel:function(){n.Panel.$element.on("bg-panel-close",function(){n.Panel.currentControl&&t.name===n.Panel.currentControl.name&&t.collapseSelection()})},collapseSelection:function(){tinymce.activeEditor.execCommand("wp_link_cancel")},openCustomizer:function(){var e=n.Panel;t.collapseSelection(),e.$element.find(".panel-body .customize").show(),e.$element.find(".presets").hide(),e.$element.trigger("bg-open-customization"),e.scrollTo(0),e.hideFooter()},insertNew:function(){var e;send_to_editor('<i class="fa fa-cog bg-inserted-icon" aria-hidden="true"> </i>'),e=n.Controls.$container.find(".bg-inserted-icon").last(),n.Controls.$container.find(".bg-inserted-icon").removeClass("bg-inserted-icon"),n.Controls.$menu.targetData[t.name]=e,e.click()},setupPanelClick:function(){var n=BOLDGRID.EDITOR.Controls,o=BOLDGRID.EDITOR.Panel;o.$element.on("click",".icon-controls .panel-selection",function(){var r=n.$menu,i=r.targetData[t.name],a=e(this);i.removeClass(function(e,t){return(t.match(/(^|\s)fa-\S+/g)||[]).join(" ")}),i.addClass(a.find("i").attr("class")),o.$element.find(".selected").removeClass("selected"),a.addClass("selected")})},highlightElement:function(){var e=n.Menu.getTarget(t);tinymce.activeEditor.selection.select(e[0]),tinymce.activeEditor.execCommand("WP_Link")},onMenuClick:function(){t.openPanel()},openPanel:function(){var e,o=n.Panel.$element,r=n.Controls.$menu,i=r.targetData[t.name];t.highlightElement(),t.setupPanelClick(),o.find(".panel-body").html(t.template({presets:BoldgridEditor.icons})),o.find(".selected").removeClass("selected"),e=o.find('i[class="'+i.attr("class")+'"]').closest(".panel-selection").addClass("selected"),BOLDGRID.EDITOR.Panel.open(t)}},BOLDGRID.EDITOR.CONTROLS.Icon.init(),t=BOLDGRID.EDITOR.CONTROLS.Icon}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.Section={$container:null,$popover:null,$currentSection:[],init:function(e){t.renderZoomTools(),t.$container=e,t.createHandles(),t.bindHandlers()},hideHandles:function(n){n&&n.relatedTarget&&e(n.relatedTarget).closest(".section-popover-imhwpb").length||(t.removeBorder(),t.$popover.find(".popover-menu-imhwpb").addClass("hidden"),t.$popover.hide())},removeBorder:function(){t.$currentSection&&t.$currentSection.length&&t.$currentSection.removeClass("content-border-imhwpb")},createHandles:function(){t.$popover=e(wp.template("boldgrid-editor-drag-handle")()),t.$popover.css({position:"fixed"}),t.$container.find("body").after(t.$popover),t.hideHandles()},menuDirection:function(e){var o=e.screenY-window.screenY,r=340,i=n.Menu.$mceContainer[0].getBoundingClientRect();o-i.bottom<r?t.$popover.find(".popover-menu-imhwpb").addClass("menu-down"):t.$popover.find(".popover-menu-imhwpb").removeClass("menu-down")},bindHandlers:function(){t.$container.find("body").on("mouseenter","> .boldgrid-section",t.positionHandles),t.$container.find("body").on("mouseleave","> .boldgrid-section",t.hideHandles),t.$popover.on("click","[data-action]",t.hideHandles),t.$popover.on("click",'[data-action="delete"]',t.deleteSection),t.$popover.on("click",'[data-action="duplicate"]',t.clone),t.$popover.on("click",'[data-action="section-width"]',t.sectionWidth),t.$popover.on("click",'[data-action="move-up"]',t.moveUp),t.$popover.on("click",'[data-action="move-down"]',t.moveDown),t.$popover.on("click",'[data-action="background"]',t.background),t.$popover.on("click",'[data-action="add-new"]',t.addNewSection),t.$popover.on("click","[data-action]",function(e){e.stopPropagation()}),t.$popover.on("click",".move-sections",t.enableSectionDrag),t.$popover.on("click",".context-menu-imhwpb",t.menuDirection),t.$container.on("boldgrid_modify_content",t.positionHandles),t.$container.on("mouseleave",t.hideHandles),t.$container.on("end_typing_boldgrid.draggable",t.positionHandles),e(".exit-row-dragging").on("click",t.exitSectionDrag),e(window).on("resize",t.updateHtmlSize)},updateHtmlSize:function(){if(e("body").hasClass("boldgrid-zoomout")){var n=t.$container.$body[0].getBoundingClientRect(),o=n.bottom-n.top+50;t.$container.find("html").css("max-height",o),e("#content_ifr").css("max-height",o)}},renderZoomTools:function(){var t=wp.template("boldgrid-editor-zoom-tools");e("#wp-content-editor-tools").append(t())},exitSectionDrag:function(){var o=e("body"),r=e(window),i=t.$container.find("html");o.removeClass("focus-on boldgrid-zoomout"),r.trigger("resize"),i.removeClass("zoomout dragging-section"),t.$container.$body.attr("contenteditable","true"),n.Controls.$menu.hide(),t.$container.$body.css("transform",""),i.css("max-height",""),e("#content_ifr").css("max-height",""),e("html, body").animate({scrollTop:e("#postdivrich").offset().top},0)},enableSectionDrag:function(){t.$container.find("html").addClass("zoomout dragging-section"),t.$container.$body.removeAttr("contenteditable"),n.Controls.$menu.addClass("section-dragging"),e("body").addClass("focus-on boldgrid-zoomout"),e(window).trigger("resize").scrollTop(0),t.updateHtmlSize(),e(".bg-zoom-controls .slider").slider({min:1,max:6,value:3,range:"max",slide:function(e,n){t.removeZoomClasses(),t.$container.$body.addClass("zoom-scale-"+n.value),t.updateHtmlSize()}})},removeZoomClasses:function(){t.$container.$body.removeClass(function(e,t){return(t.match(/(^|\s)zoom-scale-\S+/g)||[]).join(" ")})},positionHandles:function(){var n,o;return o=this.getBoundingClientRect?e(this):t.$currentSection,o&&o.length&&!1!==o.is(":visible")?(t.removeBorder(),n=o[0].getBoundingClientRect(),!t.currentlyDragging&&(t.$popover.find(".popover-menu-imhwpb").addClass("hidden"),t.$currentSection=o,t.$popover.css({top:n.bottom+35,left:"calc(50% - 38px)",transform:"translateX(-50%)"}),t.$currentSection.addClass("content-border-imhwpb"),void(this.getBoundingClientRect&&t.$popover.show()))):void t.$popover.hide()},addNewSection:function(){var n=e(wp.template("boldgrid-editor-empty-section")());t.$currentSection.after(n),t.transistionSection(n)},transistionSection:function(e){IMHWPB.tinymce_undo_disabled=!0,e.animate({"background-color":"transparent"},1500,"swing",function(){n.Controls.addStyle(e,"background-color",""),IMHWPB.tinymce_undo_disabled=!1,tinymce.activeEditor.undoManager.add()})},deleteSection:function(){t.$currentSection.remove(),t.$container.trigger(t.$container.delete_event)},clone:function(){t.$currentSection.after(t.$currentSection.clone()),t.$container.trigger(t.$container.delete_event)},moveUp:function(){var e=t.$currentSection.prev();e.length&&e.before(t.$currentSection),t.$container.trigger(t.$container.delete_event)},moveDown:function(){var e=t.$currentSection.next();e.length&&e.after(t.$currentSection),t.$container.trigger(t.$container.delete_event)},background:function(){t.$currentSection.click(),BOLDGRID.EDITOR.CONTROLS.Background.openPanel()},sectionWidth:function(){n.CONTROLS.Container.toggleSectionWidth(t.$currentSection.find(".container, .container-fluid")),t.$container.trigger(t.$container.delete_event)}},t=BOLDGRID.EDITOR.CONTROLS.Section}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.DRAG=BOLDGRID.EDITOR.DRAG||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.DRAG.Row={$recentRowElement:[],dragEnter:function(e){e=t.remapDragEnter(e),t.validateDragEnter(e)&&(t.moveIntoSection(e),t.postRowInsert())},dragCursorPosition:function(o){var r=n.Controls.$container,i=r.$current_drag;t.insertTopBottom(o)||e.each(i.IMHWPB.row_pos,function(){if(o<this.max)return t.$recentRowElement[0]!=this.element[0]&&(t.$recentRowElement=this.element,t._reorderRows(this.element),t.postRowInsert(),!1)})},postRowInsert:function(){n.Controls.$container.recalc_row_pos(),n.Controls.$container.trigger(n.Controls.$container.boldgrid_modify_event)},remapDragEnter:function(e){var t=e.closest(".boldgrid-section");return t.length&&(e=t),e},validateDragEnter:function(e){var t;return t=e.hasClass("boldgrid-section")&&0===e.find(".row:not(.dragging-imhwpb,.row .row)").not(n.Controls.$container.$current_drag).length&&0!==e.find(".container-fluid, .container").length},moveIntoSection:function(e){e.find(".container-fluid, .container").first().prepend(n.Controls.$container.$temp_insertion)},_insertRow:function(e,o){var r=n.Controls.$container.$temp_insertion;e.get(0)!=r[0]&&(e[o](r),t.postRowInsert())},insertTopBottom:function(e){var o=n.Controls.$container,r=o.$current_drag.IMHWPB.row_min_max,i=e<r.offset_top,a=e>r.offset_bottom,l=i?"before":"after",s=i?"first":"last",c=!1;return(i||a)&&(t._insertRow(o.get_other_top_level_elements()[s](),l),c=!0),c},_reorderRows:function(e){var t,o,r,i,a,l=n.Controls.$container,s=l.$temp_insertion,c=l.get_other_top_level_elements(),d=c.index(e),u=c.index(s),g="after";r=s.closest(".boldgrid-section")[0]!=e.closest(".boldgrid-section")[0],t=d<u,i=d>u,o=i&&d-1!==u,a=t&&d+1!==u,!t&&!o||a||(g="before"),i&&r&&(g="before"),t&&r&&(g="after"),e[g](s)}},t=BOLDGRID.EDITOR.DRAG.Row}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.DRAG=BOLDGRID.EDITOR.DRAG||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;t=n.DRAG.Section={currentDrag:!1,$container:null,$dragHelper:null,sectionLocations:[],init:function(e){t.$container=e,t.$dragHelper=t.renderHelpers(),t.bind()},renderHelpers:function(){var n=e('<div id="boldgrid-drag-pointer"></div>');return t.$container.find("html").append(n),n},bind:function(){t.$container.on("dragstart",".dragging-section",function(){return!1}).on("mousedown",".dragging-section .boldgrid-section",t.start).on("mousemove",".dragging-section",t.over).on("mouseup dragend",".dragging-section",t.end).on("mousemove",".dragging-section",t.overHelper)},overHelper:function(e){(t.$container.$current_drag||t.currentDrag)&&(!t.lastPosEvent||t.lastPosEvent+25<=e.timeStamp)&&(t.lastPosEvent=e.timeStamp,t.positionHelper(e.originalEvent))},end:function(e){t.currentDrag&&(t.currentDrag.$clone.remove(),t.currentDrag.$element.removeClass("section-drag-element"),t.currentDrag=!1,t.$container.$html.removeClass("no-select-imhwpb section-dragging-active"))},drag:function(o){var r=o.originalEvent.pageY,i=null;t.sectionLocations.length&&(e.each(t.sectionLocations,function(){this.midPoint<r&&(i=this)}),!i&&r>t.sectionLocations[t.sectionLocations.length-1].midPoint&&(i=t.sectionLocations[t.sectionLocations.length-1]),!i&&r<t.sectionLocations[0].midPoint&&(t.sectionLocations[0].$section.before(t.currentDrag.$element),t.calcSectionLocs()),i&&(i.$section.after(t.currentDrag.$element),t.calcSectionLocs()),n.CONTROLS.Section.updateHtmlSize())},over:function(n){t.currentDrag&&((!t.lastDragEvent||t.lastDragEvent+100<=n.timeStamp)&&(t.lastDragEvent=n.timeStamp,t.drag(n)),(!t.lastScrollEvent||t.lastScrollEvent+20<=n.timeStamp)&&(t.lastScrollEvent=n.timeStamp,e(window).height()-n.pageY<50?window.scrollBy(0,10):n.pageY/e(window).height()<.2&&window.scrollBy(0,-10)))},positionHelper:function(e){t.$dragHelper.css({top:e.pageY-15,left:e.pageX-15})},calcSectionLocs:function(){var n=[];t.$container.$body.find("> .boldgrid-section").not(t.currentDrag.$clone).each(function(){
var t=this.getBoundingClientRect(),o=(t.bottom-t.top)/2+t.top;n.push({$section:e(this),midPoint:o})}),t.sectionLocations=n},start:function(n){var o=e(this);t.currentDrag={$element:o,$clone:o.clone(),startPos:{x:n.originalEvent.pageX,y:n.originalEvent.pageY},offsetFromTop:n.originalEvent.pageY-o.offset().top},t.currentDrag.$element.addClass("section-drag-element"),t.currentDrag.$clone.addClass("section-drag-clone"),t.$container.setInheritedBg(t.currentDrag.$clone,1),t.$container.$body.append(t.currentDrag.$clone),t.$container.find("html").addClass("section-dragging-active"),t.$container.$html.addClass("no-select-imhwpb"),t.$container.$body.removeAttr("contenteditable"),t.positionHelper(n.originalEvent),t.calcSectionLocs()}}}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.NOTICE=BOLDGRID.EDITOR.NOTICE||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;n.NOTICE.Update={title:"New Release: BoldGrid Editor 1.3",template:wp.template("boldgrid-upgrade-notice"),init:function(){BoldgridEditor.display_update_notice&&(t.displayPanel(),setTimeout(function(){t.bindEvents()},1e3))},bindEvents:function(){t.bindDismissButton(),t.panelClick(),n.Panel.$element.on("click",function(e){e.stopPropagation()})},panelClick:function(){e("body").one("click",function(){t.dismissPanel()})},bindDismissButton:function(){n.Panel.$element.find(".bg-upgrade-notice .dismiss").one("click",function(){t.dismissPanel()})},dismissPanel:function(){var o=e("body");o.addClass("fadeout-background"),n.Panel.$element.addClass("bounceOutDown").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(e){t.removeEffects()}),setTimeout(function(){t.removeEffects()},1e3)},removeEffects:function(){e("body").removeClass("bg-editor-intro-1-3 fadeout-background"),n.Panel.resetPosition(),n.Panel.$element.hide(),n.Panel.$element.removeClass("animated bounceOutDown bounceInDown")},displayPanel:function(){e("body").addClass("bg-editor-intro-1-3"),t.initPanel(),t.renderPanel()},animatePanel:function(){n.Panel.$element.addClass("animated bounceInDown").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(t){e(".bg-editor-loading").hide()})},renderPanel:function(){n.Panel.$element.show(),t.animatePanel()},initPanel:function(){var e=(n.Panel.$element,t.template());n.Panel.setDimensions(800,400),n.Panel.setTitle(t.title),n.Panel.setContent(e)}},t=n.NOTICE.Update}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.RESIZE=BOLDGRID.EDITOR.RESIZE||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.RESIZE.Row={$body:null,handleSize:14,$container:null,$topHandle:null,$bottomHandle:null,handleOffset:null,currentlyDragging:!1,$currentRow:null,init:function(e){t.$container=e,t.handleOffset=t.handleSize,t.createHandles(),t.bindHandlers(),t.initDraggable()},bindHandlers:function(){t.$container.on("mouseenter",".row:not(.row .row):not(.editing-as-row .row)",t.positionHandles).on("mouseleave",".row:not(.row .row):not(.editing-as-row .row)",t.hideHandles).on("mouseenter",".editing-as-row .row .row:not(.row .row .row)",t.positionHandles).on("mouseleave",".editing-as-row .row .row:not(.row .row .row)",t.hideHandles).on("edit-as-row-enter",t.hideHandles).on("edit-as-row-leave",t.hideHandles).on("boldgrid_modify_content",t.positionHandles).on("mouseleave",t.hideHandles).on("end_typing_boldgrid.draggable",t.positionHandles)},createHandles:function(){t.$topHandle=e('<span class="draghandle top" title="Drag Resize Row" data-setting="padding-top"></span>'),t.$bottomHandle=e('<span class="draghandle bottom" title="Drag Resize Row" data-setting="padding-bottom"></span>'),e.each([t.$topHandle,t.$bottomHandle],function(){this.css({position:"fixed",height:t.handleSize,width:t.handleSize})}),t.$container.find("body").after(t.$topHandle).after(t.$bottomHandle),t.hideHandles()},initDraggable:function(){var o,r;t.$container.$body;t.$container.find(".draghandle").draggable({scroll:!1,axis:"y",start:function(n,i){t.currentlyDragging=!0,r=e(this).data("setting"),o=parseInt(t.$currentRow.css(r)),t.$currentRow.addClass("changing-padding"),t.$container.$html.addClass("no-select-imhwpb"),t.$container.$html.addClass("changing-"+r)},stop:function(e,n){t.currentlyDragging=!1,t.$currentRow.removeClass("changing-padding"),t.$container.$html.removeClass("no-select-imhwpb"),t.$container.$html.removeClass("changing-"+r)},drag:function(i,a){var l,s,c,d=a.position.top-a.originalPosition.top;"padding-top"==r?(l=parseInt(t.$currentRow.css(r))-d,c="top",l>0&&d&&window.scrollBy(0,-d)):(l=o+d,c="bottom"),l<0&&(s=t.$currentRow[0].getBoundingClientRect(),a.position.top=s[c]-(a.helper.hasClass("top")?0:t.handleOffset),l=0),n.Controls.addStyle(t.$currentRow,r,l),t.$container.$html.hasClass("editing-as-row")&&e.fourpan&&e.fourpan.refresh()}})},positionHandles:function(){var n,o,r;return o=this.getBoundingClientRect?e(this):t.$currentRow,o&&o.length&&!1!==o.is(":visible")?(n=o[0].getBoundingClientRect(),r=n.right-100,!t.currentlyDragging&&(t.$currentRow=o,t.$topHandle.css({top:n.top,left:r}),t.$bottomHandle.css({top:n.bottom-t.handleOffset,left:r}),void(this.getBoundingClientRect&&(t.$topHandle.show(),t.$bottomHandle.show())))):(t.$topHandle.hide(),void t.$bottomHandle.hide())},hideHandles:function(n){e(this);if(!(n&&n.relatedTarget&&e(n.relatedTarget).hasClass("draghandle"))){if(t.currentlyDragging)return!1;t.$topHandle.hide(),t.$bottomHandle.hide()}}},t=BOLDGRID.EDITOR.RESIZE.Row}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.VALIDATION=BOLDGRID.EDITOR.VALIDATION||{},function(e){"use strict";BOLDGRID.EDITOR.VALIDATION.Section={};var t=BOLDGRID.EDITOR.VALIDATION.Section;e.fn.closestContext=function(e,t){var n;return n=this.is(e)?this:this.parentsUntil(t).filter(e).eq(0)};var n="container",o="boldgrid-section",r='<div class="'+o+'"></div>',i='<div class="'+n+'"></div>',a=function(){var o,r=[],i=["h1","h2","h3","h4","h5","h6","h7","a","img","p","button","ul","ol","dl","form","table",'[data-imhwpb-draggable="true"]',".wpview-wrap",".wpview","blockquote","code","abbr"].join(",");o=function(){e(r).wrapAll('<div class="'+n+'"><div class="row"><div class="col-md-12">'),r=[]},t.$context.find("> *").each(function(){var t=e(this);t.is(i)?r.push(this):o()}),o()};t.updateContent=function(e){n=BoldgridEditor.default_container||"container-fluid",i='<div class="'+n+'"></div>',t.$context=e,a(),s(),d(),c(),l()};var l=function(){t.$context.find(".boldgrid-section > .container-fluid").each(function(){var t=e(this),n=t.attr("class").replace("container-fluid","");t.attr("class","container-fluid"),t.parent().addClass(n)})},s=function(){t.$context.find(".container").each(function(){var n=e(this),r=n.parent();r.length&&r[0]!=t.$context[0]&&!1===r.hasClass(o)&&r.addClass(o)})},c=function(){t.$context.find(".row:not(.row .row)").each(function(){var n=e(this),a=n.parent();n.closestContext(".container, .container-fluid",t.$context).length||n.wrap(i),n.closestContext(".boldgrid-section",t.$context).length||(a.length&&a[0]!=t.$context[0]?a.addClass(o):n.parent().wrap(r))})},d=function(){t.$context.find(".container, .container-fluid").each(function(){var t=e(this);t.parent(".boldgrid-section").length||!1!==t.hasClass(o)||t.wrap(r)})}}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},BOLDGRID.EDITOR.CONTROLS.IMAGE=BOLDGRID.EDITOR.CONTROLS.IMAGE||{},function(e){"use strict";var t;BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.IMAGE.Change={name:"image-change",tooltip:"Change Image",priority:85,iconClasses:"genericon genericon-image",selectors:["img"],init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},openModal:function(){tinymce.activeEditor.buttons.wp_img_edit.onclick(),wp.media.frame.setState("replace-image"),wp.media.frame.state("replace-image").on("replace",function(e){BOLDGRID.EDITOR.CropInstance.onReplace(e)})},onMenuClick:function(e){t.openModal()}},BOLDGRID.EDITOR.CONTROLS.IMAGE.Change.init(),t=BOLDGRID.EDITOR.CONTROLS.IMAGE.Change}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},BOLDGRID.EDITOR.CONTROLS.IMAGE=BOLDGRID.EDITOR.CONTROLS.IMAGE||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.IMAGE.Design={classes:BoldgridEditor.builder_config.image,name:"image",tooltip:"Image Design",priority:80,iconClasses:"fa fa-cog",selectors:["img"],init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},panel:{title:"Image Design",height:"500px",width:"280px",includeFooter:!0,customizeCallback:!0,customizeLeaveCallback:!0,customizeSupport:["margin"]},onMenuClick:function(e){t.openPanel()},elementClick:function(){BOLDGRID.EDITOR.Panel.isOpenControl(this)&&t.openPanel()},setup:function(){t.validateComponentsUsed(),t._setupPanelClick(),t._setupCustomizeHandlers()},_setupCustomizeHandlers:function(){var e=BOLDGRID.EDITOR.Panel;e.$element.on("bg-customize-exit",function(){e.currentControl==t&&n.Panel.showFooter()})},validateComponentsUsed:function(){e.each(BoldgridEditor.builder_config.components_used.image,function(){var n=e("<div>").attr("class",this.classes);t.removeImageClass(n),this.classes=n.attr("class")})},removeImageClass:function(e){return e.removeClass(function(e,t){return(t.match(/(^|\s)wp-image-\S+/g)||[]).join(" ")}),e},_setupPanelClick:function(){var n=BOLDGRID.EDITOR.Panel;n.$element.on("click",".image-design .panel-selection",function(){var o=e(this),r=o.data("preset"),i=BOLDGRID.EDITOR.Menu.getTarget(t);i.removeClass(function(e,t){return(t.match(/(^|\s)bg-img-\S+/g)||[]).join(" ")}),t.removeModClasses(i),i.removeClass(function(e,t){return(t.match(/(^|\s)img-\S+/g)||[]).join(" ")}),tinyMCE.activeEditor.selection.collapse(!1),o.hasClass("selected")?n.clearSelected():(n.clearSelected(),i.addClass(r),o.addClass("selected"))})},removeModClasses:function(e){e.parent('[class^="mod-img"]').removeClass(function(e,t){return(t.match(/(^|\s)mod-img-\S+/g)||[]).join(" ")})},preselectImage:function(){var o=n.Menu.getTarget(t),r=o.attr("class"),i=[];if(r=r?r.split(" "):[],e.each(r,function(){0===this.indexOf("bg-img")&&i.push(this)}),i=i.join(" "))return n.Panel.$element.find('[data-preset="'+i+'"]:first').addClass("selected"),!1},_updateMyDesigns:function(){t.usedComponents=BoldgridEditor.builder_config.components_used.image.slice(0),n.Controls.$container.$body.find(".bg-img").each(function(){var n,o,r,i=e(this),a=i.clone().removeClass("bg-control-element");a=t.removeImageClass(a),n=a.attr("class"),o=t.usedComponents,r=_.findIndex(o,function(e){return e.classes==n}),-1===r&&o.push({style:a.attr("style"),classes:n})})},openPanel:function(){var e=BOLDGRID.EDITOR.Panel,n=BOLDGRID.EDITOR.Menu.getTarget(t),o=wp.template("boldgrid-editor-image");t._updateMyDesigns(),e.clear(),e.$element.find(".panel-body").html(o({src:n.attr("src"),presets:t.classes,myPresets:t.usedComponents})),t.preselectImage(),e.open(t)}},BOLDGRID.EDITOR.CONTROLS.IMAGE.Design.init(),t=BOLDGRID.EDITOR.CONTROLS.IMAGE.Design}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},BOLDGRID.EDITOR.CONTROLS.IMAGE=BOLDGRID.EDITOR.CONTROLS.IMAGE||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.IMAGE.Filter={name:"image-filter",priority:90,iconClasses:"fa fa-magic",tooltip:"Image Filter",sliderHistory:{},preview:null,presetIntensity:"50%",panel:{title:"Image Filters",height:"536px",width:"800px",scrollTarget:".presets ul",sizeOffset:-130},selectors:["img"],presets:[{name:"none",title:"None"},{name:"vintage",title:"Vintage"},{name:"lomo",title:"Lomo"},{name:"clarity",title:"Clarity"},{name:"sinCity",title:"Sin City"},{name:"sunrise",title:"Sunrise"},{name:"crossProcess",title:"Cross Process"},{name:"orangePeel",title:"Orange Peel"},{name:"love",title:"Love"},{name:"grungy",title:"Grungy"},{name:"jarques",title:"Jarques"},{name:"pinhole",title:"Pinhole"},{name:"oldBoot",title:"Old Boot"},{name:"glowingSun",title:"Glowing Sun"},{name:"hazyDays",title:"Hazy Days"},{name:"herMajesty",title:"Her Majesty"},{name:"nostalgia",title:"Nostalgia"},{name:"hemingway",title:"Hemingway"},{name:"concentrate",title:"Concentrate"}],customizeSettings:{brightness:{title:"Brightness",range:{min:-50,max:50}},vibrance:{title:"Vibrance",range:{min:-50,max:50}},contrast:{title:"Contrast",range:{min:-10,max:10}},saturation:{title:"Saturation",range:{min:-50,max:50}},exposure:{title:"Exposure",range:{min:-50,max:50}},hue:{title:"Hue",range:{min:0,max:100}},gamma:{title:"Gamma",range:{min:1,max:4,val:1}},clip:{title:"Clip",range:{min:0,max:50}},stackBlur:{title:"Blur",range:{min:0,max:30}},sepia:{title:"Sepia",range:{min:0,max:100}},noise:{title:"Noise",range:{min:0,max:50}},sharpen:{title:"Sharpen",range:{min:0,max:50}}},init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},setup:function(){t._setupInsertClick(),t._setupToggleCustomize(),t._setupPanelClick()},_setupToggleCustomize:function(){var e,n=BOLDGRID.EDITOR.Panel;BOLDGRID.EDITOR.Menu;n.$element.on("click",".presets .activate-customize",function(){n.$element.find(".choices").addClass("customizing"),t.preview.revert(),t.applySliderSettings()}),n.$element.on("click",".customize .activate-presets",function(){n.$element.find(".choices").removeClass("customizing"),t.preview.revert(),e=n.$element.find(".selected").data("preset"),e&&"none"!==e?t.renderPreset(e):(n.clearSelected(),n.$element.find('[data-preset="none"]').addClass("selected"))})},renderPreset:function(e){var n=BOLDGRID.EDITOR.Panel;n.$element.addClass("rendering"),t.preview.revert(!1),t.preview[e](t.presetIntensity).render(function(e){n.$element.removeClass("rendering")})},_setupPanelClick:function(){var n=BOLDGRID.EDITOR.Panel;BOLDGRID.EDITOR.Menu;n.$element.on("click",".image-filter .panel-selection",function(){var o=e(this),r=(n.$element.find(".preview").find("img, canvas"),o.data("preset"));return!n.$element.hasClass("rendering")&&(n.clearSelected(),o.addClass("selected"),void("none"!=r?t.renderPreset(r):t.preview.revert()))})},_setupInsertClick:function(){BOLDGRID.EDITOR.Panel.$element.on("click",".preview .insert-image",function(){t.insertImage()})},_setupSliders:function(){t.sliderHistory={},BOLDGRID.EDITOR.Panel.$element.find(".slider").each(function(){var n=e(this),o=n.data("control"),r=t.customizeSettings[o].range;n.slider({min:r.min,max:r.max,value:r.val||0,change:function(e,n){t.sliderHistory[o]=n.value,t.applySliderSettings()}})})},applySliderSettings:function(){t.preview.revert(!1),e.each(t.sliderHistory,function(e){t.preview[e](this)}),t.preview.render()},insertImage:function(){var n=BOLDGRID.EDITOR.Panel,o=BOLDGRID.EDITOR.Menu.getTarget(t);n.$element.addClass("rendering"),e.ajax({type:"post",url:ajaxurl,dataType:"json",data:{action:"boldgrid_canvas_image",attachement_id:o.attachment_id,image_data:t.preview.canvas.toDataURL()},success:function(e){e&&e.success&&(o.removeClass("wp-image-"+o.attachment_id),o.addClass("wp-image-"+e.attachment_id),o.attachment_id=e.attachment_id,o.attr("src",e.url),o.attr("data-mce-src",e.url),BoldgridEditor.images=e.images)}}).always(function(){n.$element.removeClass("rendering")})},elementClick:function(){BOLDGRID.EDITOR.Panel.isOpenControl(this)&&t.openPanel()},_renderPanelThumbnails:function(){var e,o=1;(e=function(){var r='[data-preset="'+t.presets[o].name+'"] img';n.Panel.$element.find(r).length&&Caman(r,function(){this[t.presets[o].name]("50%").render(function(){o++,t.presets[o]&&e()})})})()},get_image_src:function(){var n,o=BOLDGRID.EDITOR.Menu.getTarget(t),r=o.attr("src");return e.each(BoldgridEditor.images,function(){if(o.hasClass("wp-image-"+this.attachment_id))return o.attachment_id=this.attachment_id,n=this.thumbnail,!1}),n||(n=r),{src:n,fullSrc:r}},openPanel:function(){var e,o=BOLDGRID.EDITOR.Panel,r=wp.template("boldgrid-editor-image-filter");o.clear(),e=this.get_image_src(),o.$element.removeClass("rendering"),o.$element.find(".panel-body").html(r({fullSrc:e.fullSrc,src:e.src,presets:t.presets,customizeSettings:t.customizeSettings})),!e.fullSrc||Caman.IO.isURLRemote(e.fullSrc)?n.Panel.$element.find(".panel-body .remote-image-error").addClass("error-active"):(t._setupSliders(),t._renderPanelThumbnails(),o.$element.find('[data-preset="none"]').addClass("selected"),t.preview=Caman(o.$element.find(".preview img")[0])),tinyMCE.activeEditor.selection.collapse(!1),o.open(t),o.centerPanel()},onMenuClick:function(){t.openPanel()}},BOLDGRID.EDITOR.CONTROLS.IMAGE.Filter.init(),t=BOLDGRID.EDITOR.CONTROLS.IMAGE.Filter}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},BOLDGRID.EDITOR.CONTROLS.MEDIA=BOLDGRID.EDITOR.CONTROLS.MEDIA||{},function(e){"use strict";var t,n=BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.MEDIA.Edit={name:"edit-media",tooltip:"Edit",priority:85,iconClasses:"dashicons dashicons-edit",selectors:['[data-wpview-type="gallery"]','[data-wpview-type="ninja_forms"]'],init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},openModal:function(){var e=n.Menu.getTarget(t).get(0);e&&wp.mce.views.edit(tinymce.activeEditor,e)},onMenuClick:function(e){t.openModal()}},BOLDGRID.EDITOR.CONTROLS.MEDIA.Edit.init(),t=BOLDGRID.EDITOR.CONTROLS.MEDIA.Edit}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.EDITOR=BOLDGRID.EDITOR||{},BOLDGRID.EDITOR.CONTROLS=BOLDGRID.EDITOR.CONTROLS||{},BOLDGRID.EDITOR.CONTROLS.MEDIA=BOLDGRID.EDITOR.CONTROLS.MEDIA||{},function(e){"use strict";var t;BOLDGRID.EDITOR;BOLDGRID.EDITOR.CONTROLS.MEDIA.Map={name:"edit-maps",tooltip:"Edit Map",priority:85,iconClasses:"dashicons dashicons-edit",selectors:[".boldgrid-google-maps"],init:function(){BOLDGRID.EDITOR.Controls.registerControl(this)},openModal:function(){wp.media.editor.open(),wp.media.frame.setState("iframe:google_map")},onMenuClick:function(e){t.openModal()}},BOLDGRID.EDITOR.CONTROLS.MEDIA.Map.init(),t=BOLDGRID.EDITOR.CONTROLS.MEDIA.Map}(jQuery),function(e){"use strict";e.fourpan||(e.fourpan=function(t,n){var o=this;if(!e.fourpan.initiated){var r;t?(r=e(t).find("html"),r.length||(r=e(t).closest("html"))):r=e("html");var i="fourpan-overlays",a=!1,l={},s=e.extend({},e.fourpan.defaultOptions,n),c=i+" "+s.overlay_classes,d=e('<div class="forpan-close-button">Close</div>');d.css({position:"absolute","z-index":"10000","font-size":"16px",background:"rgb(213, 78, 33)","border-radius":"25px",padding:"8px 15px",color:"white",display:"none"}).on("mouseenter",function(){e(this).css({"background-color":"#f95b26",cursor:"pointer"})}).on("mouseleave",function(){e(this).css({"background-color":"rgb(213, 78, 33)",cursor:"default"})}),r.append(d);var u=function(){l[s.id_prefix+"-top"]={},l[s.id_prefix+"-right"]={},l[s.id_prefix+"-bottom"]={},l[s.id_prefix+"-left"]={},e.fourpan.initiated=!0,g(),p()},g=function(){e.each(l,function(e){var t=r.find("#"+e);t.length?l[e]=t:(t=m(e),l[e]=t)})},m=function(t){var n=e('<div id="'+t+'" class="'+c+'"></div>');return r.append(n),n},p=function(){r.find("."+i).add(d).on("click",_),r.keyup(function(e){27==e.keyCode&&_()})},_=function(){r.find("."+i).add(d).fadeOut(),a=!1,s.deactivate(),v()},f=function(){var e=r.find("."+i);e.css({position:"absolute",top:"0",right:"0",bottom:"0",left:"0","z-index":"9999","background-color":s.color}),a=!0};e.fourpan.dismiss=function(){_()};var h=function(){r.find("body").on("DOMSubtreeModified.fourpan",function(t){o.time=t.timeStamp,setTimeout(function(){var t=(new Date).getTime();(!o.last_event||o.last_event<t-250)&&(o.last_event=t,e.fourpan.refresh())},250)})},v=function(){r.find("body").off(".fourpan")},b=function(e,t,n,o){t>0&&d.hide();var a=e[0].getBoundingClientRect();l[s.id_prefix+"-top"].stop().animate({height:Math.max(a.top-n,0)},t),l[s.id_prefix+"-right"].stop().animate({top:Math.max(a.top-n,0),left:a.left+e.outerWidth()+n},t),l[s.id_prefix+"-bottom"].stop().animate({top:a.top+e.outerHeight()+n,width:a.left+e.outerWidth()+n},t);var c=Math.max(a.top-n,0)-(a.top-n);l[s.id_prefix+"-left"].stop().animate({width:Math.max(a.left-n,0),top:Math.max(a.top-n,0),height:e.outerHeight()+2*n-c},{duration:t,complete:function(){o&&d.css({left:a.left+(e.outerWidth()+n)/2-35,top:a.top+e.outerHeight()+n+20}).fadeIn(),r.find("."+i).fadeIn()}})};return e.fourpan.highlight=function(t){var n;if(t instanceof jQuery){if(t.length>1||!t.length)return!1;n=t}else n=e(t);return 1===n.length&&n.is(":visible")?(e.fourpan.$recent_highlight=n,a||(f(),s.activate(),h(),r.find("."+i).hide()),b(n,s.transition_speed,s.element_padding,!0),!0):(_(),!1)},e.fourpan.refresh=function(){a&&(r.find(e.fourpan.$recent_highlight).length?(b(e.fourpan.$recent_highlight,0,s.element_padding,!0),o.last_event=(new Date).getTime()):_())},u(),r}},e.fourpan.defaultOptions={id_prefix:"fourpan-overlay",overlay_classes:"",color:"rgba(0,0,0,.7)",transition_speed:1e3,element_padding:20,activate:function(){},deactivate:function(){}},e.fn.fourpan=function(t){return this.each(function(){new e.fourpan(this,t)})})}(jQuery),function(e){e.fn.is_typing_boldgrid=function(){var t=this,n=e(this);jQuery.Event("end_typing_boldgrid"),jQuery.Event("start_typing_boldgrid");var o=1e3;this.is_typing=!1;var r,i=function(e){t.is_typing||(t.is_typing=!0,n.trigger("start_typing_boldgrid")),r=(new Date).getTime();var i=function(e){r==e&&(t.is_typing=!1,n.trigger("end_typing_boldgrid"))};setTimeout(i,o,r)};return e(this).on("keydown is-typing-keydown",i),this}}(jQuery),function(e){e.fn.textSelect=function(t,n){var o,r,i,a,l=250,s=function(e){!i&&r&&o+l<e.timeStamp&&(a=e.timeStamp,i=!0,t())},c=function(e){r=!1,i=!1,n()};r=function(e){var t=e.originalEvent.originalTarget||e.originalEvent.srcElement;if(t){var n=jQuery(t);n.is('[draggable="true"]')||n.closest('[draggable="true"]').length||n.is('[unselectable="on"]')||n.closest('[unselectable="on"]').length||(o=e.timeStamp,r=!0)}},e(this).on("mousedown",r).on("mouseup dragend drop",c).on("mousemove",s)}}(jQuery);